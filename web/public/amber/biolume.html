<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIOLUME — Touch the darkness. Watch it glow.</title>
    
    <!-- Open Graph -->
    <meta property="og:title" content="BIOLUME — Touch the darkness. Watch it glow.">
    <meta property="og:description" content="Interactive bioluminescent organisms. Touch creates light in the deep.">
    <meta property="og:image" content="https://kochi.to/amber/biolume-og.png">
    <meta property="og:url" content="https://kochi.to/amber/biolume.html">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BIOLUME — Touch the darkness. Watch it glow.">
    <meta name="twitter:description" content="Interactive bioluminescent organisms. Touch creates light in the deep.">
    <meta name="twitter:image" content="https://kochi.to/amber/biolume-og.png">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: #000810;
            overflow: hidden;
            font-family: 'Space Mono', monospace;
            touch-action: none;
        }
        
        canvas {
            display: block;
            cursor: none;
        }
        
        .title {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #2D9596;
            font-size: 14px;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0.6;
            pointer-events: none;
            z-index: 10;
        }
        
        .hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #2D9596;
            font-size: 12px;
            opacity: 0.4;
            pointer-events: none;
            animation: pulse 3s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 0.6; }
        }
        
        @media (max-width: 600px) {
            .title {
                font-size: 11px;
                top: 15px;
                left: 15px;
            }
            .hint {
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="title">BIOLUME</div>
    <div class="hint">touch the darkness</div>
    <canvas id="canvas"></canvas>
    
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;
        
        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        });
        
        // Bioluminescent organisms
        const organisms = [];
        
        // Color palette - vibrant bioluminescent colors
        const colors = [
            '#00ffff', // cyan
            '#0ff0ff', // bright cyan
            '#00ff88', // cyan-green
            '#88ffff', // light cyan
            '#00ccff', // sky blue
            '#00ffcc', // turquoise
            '#66ffff', // pale cyan
            '#3bf3ff', // electric cyan
        ];
        
        class Organism {
            constructor(x, y, touchX, touchY) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 15 + 8;
                this.life = 1.0;
                this.maxLife = Math.random() * 3 + 2;
                this.color = colors[Math.floor(Math.random() * colors.length)];
                
                // Movement away from touch point
                const angle = Math.atan2(y - touchY, x - touchX);
                const speed = Math.random() * 2 + 1;
                this.vx = Math.cos(angle) * speed;
                this.vy = Math.sin(angle) * speed;
                
                // Drift
                this.drift = Math.random() * 0.1 - 0.05;
                
                // Pulse
                this.pulse = Math.random() * Math.PI * 2;
                this.pulseSpeed = Math.random() * 0.05 + 0.02;
                
                // Trail
                this.trail = [];
                this.trailLength = Math.floor(Math.random() * 20 + 10);
            }
            
            update(delta) {
                // Age
                this.life -= delta / this.maxLife;
                
                // Move
                this.x += this.vx * delta;
                this.y += this.vy * delta;
                
                // Drift
                this.vx += this.drift * delta;
                this.vy += this.drift * delta;
                
                // Slow down
                this.vx *= 0.99;
                this.vy *= 0.99;
                
                // Pulse
                this.pulse += this.pulseSpeed;
                
                // Trail
                this.trail.push({ x: this.x, y: this.y, life: this.life });
                if (this.trail.length > this.trailLength) {
                    this.trail.shift();
                }
                
                return this.life > 0;
            }
            
            draw() {
                const pulseSize = this.size * (1 + Math.sin(this.pulse) * 0.3);
                const alpha = Math.pow(this.life, 0.7);
                
                // Draw trail
                this.trail.forEach((point, i) => {
                    const trailAlpha = (i / this.trail.length) * alpha * 0.3;
                    const trailSize = this.size * 0.3 * (i / this.trail.length);
                    
                    ctx.fillStyle = this.color + Math.floor(trailAlpha * 255).toString(16).padStart(2, '0');
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, trailSize, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                // Outer glow
                const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, pulseSize * 3);
                gradient.addColorStop(0, this.color + Math.floor(alpha * 100).toString(16).padStart(2, '0'));
                gradient.addColorStop(0.3, this.color + Math.floor(alpha * 50).toString(16).padStart(2, '0'));
                gradient.addColorStop(1, this.color + '00');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(this.x, this.y, pulseSize * 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Core
                const coreGradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, pulseSize);
                coreGradient.addColorStop(0, '#ffffff' + Math.floor(alpha * 255).toString(16).padStart(2, '0'));
                coreGradient.addColorStop(0.4, this.color + Math.floor(alpha * 255).toString(16).padStart(2, '0'));
                coreGradient.addColorStop(1, this.color + Math.floor(alpha * 100).toString(16).padStart(2, '0'));
                
                ctx.fillStyle = coreGradient;
                ctx.beginPath();
                ctx.arc(this.x, this.y, pulseSize, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // Spawn organisms in a burst
        function spawnBurst(x, y, count = 15) {
            for (let i = 0; i < count;i++) {
                const angle = (Math.PI * 2 * i) / count + Math.random() * 0.3;
                const distance = Math.random() * 40 + 20;
                const ox = x + Math.cos(angle) * distance;
                const oy = y + Math.sin(angle) * distance;
                organisms.push(new Organism(ox, oy, x, y));
            }
        }
        
        // Handle touch/mouse
        let touching = false;
        let lastSpawn = 0;
        
        function handleInteraction(e) {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            
            if (e.touches) {
                Array.from(e.touches).forEach(touch => {
                    const x = touch.clientX - rect.left;
                    const y = touch.clientY - rect.top;
                    if (Date.now() - lastSpawn > 100) {
                        spawnBurst(x, y, 12);
                        lastSpawn = Date.now();
                    }
                });
            } else {
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                if (Date.now() - lastSpawn > 100) {
                    spawnBurst(x, y, 12);
                    lastSpawn = Date.now();
                }
            }
        }
        
        canvas.addEventListener('mousedown', (e) => {
            touching = true;
            handleInteraction(e);
        });
        
        canvas.addEventListener('mousemove', (e) => {
            if (touching) handleInteraction(e);
        });
        
        canvas.addEventListener('mouseup', () => {
            touching = false;
        });
        
        canvas.addEventListener('touchstart', handleInteraction);
        canvas.addEventListener('touchmove', handleInteraction);
        canvas.addEventListener('touchend', () => {
            touching = false;
        });
        
        // Ambient spawning
        function ambientSpawn() {
            if (Math.random() < 0.02 && organisms.length < 100) {
                const x = Math.random() * width;
                const y = Math.random() * height;
                organisms.push(new Organism(x, y, x, y));
            }
        }
        
        // Animation loop
        let lastTime = performance.now();
        
        function animate(currentTime) {
            const delta = Math.min((currentTime - lastTime) / 1000, 0.1);
            lastTime = currentTime;
            
            // Fade background (creates trail effect)
            ctx.fillStyle = 'rgba(0, 8, 16, 0.15)';
            ctx.fillRect(0, 0, width, height);
            
            // Update and draw organisms
            for (let i = organisms.length - 1; i >= 0; i--) {
                const org = organisms[i];
                if (!org.update(delta)) {
                    organisms.splice(i, 1);
                } else {
                    org.draw();
                }
            }
            
            // Ambient spawning
            ambientSpawn();
            
            requestAnimationFrame(animate);
        }
        
        // Start
        animate(performance.now());
        
        // Initial burst in center
        setTimeout(() => {
            spawnBurst(width / 2, height / 2, 20);
        }, 500);
    </script>
</body>
</html>