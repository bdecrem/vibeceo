<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FORTUNE COOKIE — Amber</title>
  <link rel="icon" type="image/svg+xml" href="/amber/favicon.svg">
  
  <!-- OpenGraph -->
  <meta property="og:title" content="FORTUNE COOKIE — Amber">
  <meta property="og:description" content="Crack open a fortune cookie. The fortunes are... not quite what you expect.">
  <meta property="og:image" content="https://intheamber.com/amber/fortune-og.png">
  <meta property="og:url" content="https://intheamber.com/amber/fortune.html">
  <meta property="og:type" content="website">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="FORTUNE COOKIE — Amber">
  <meta name="twitter:description" content="Crack open a fortune cookie. The fortunes are... not quite what you expect.">
  <meta name="twitter:image" content="https://intheamber.com/amber/fortune-og.png">
  
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #0D0D0D;
      color: #D4A574;
      font-family: 'Inter', sans-serif;
      overflow: hidden;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }

    #container {
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    #instruction {
      font-family: 'Space Mono', monospace;
      font-size: clamp(14px, 4vw, 18px);
      letter-spacing: 2px;
      margin-bottom: 40px;
      text-transform: uppercase;
      animation: pulse 2s ease-in-out infinite;
      text-align: center;
      padding: 0 20px;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }

    #cookie {
      width: clamp(200px, 50vw, 300px);
      height: clamp(200px, 50vw, 300px);
      position: relative;
      cursor: pointer;
      transition: transform 0.3s ease;
      transform-style: preserve-3d;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotateY(0deg); }
      50% { transform: translateY(-20px) rotateY(180deg); }
    }

    #cookie:active {
      transform: scale(0.95) !important;
    }

    .cookie-half {
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 30% 30%, #FFD700, #D4A574, #B8860B);
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      box-shadow: 
        inset -10px -10px 20px rgba(0,0,0,0.3),
        inset 10px 10px 20px rgba(255,215,0,0.3),
        0 10px 40px rgba(212, 165, 116, 0.4);
      transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .cookie-half::before {
      content: '';
      position: absolute;
      width: 8px;
      height: 8px;
      background: #8B4513;
      border-radius: 50%;
      top: 30%;
      left: 25%;
      box-shadow: 
        40px 20px 0 #8B4513,
        20px 50px 0 #8B4513,
        60px 60px 0 #8B4513,
        50px 35px 0 #8B4513;
    }

    .cracked .cookie-half:first-child {
      transform: translate(-150px, -100px) rotate(-45deg);
      opacity: 0;
    }

    .cracked .cookie-half:last-child {
      transform: translate(150px, -100px) rotate(45deg);
      opacity: 0;
    }

    #fortune {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: #FFF9E6;
      color: #0D0D0D;
      padding: 30px 40px;
      max-width: 90vw;
      width: clamp(280px, 80vw, 500px);
      border-radius: 4px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      font-family: 'Space Mono', monospace;
      font-size: clamp(14px, 3.5vw, 16px);
      line-height: 1.8;
      text-align: center;
      opacity: 0;
      transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      z-index: 10;
    }

    #fortune.show {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }

    #fortune::before {
      content: '✦';
      display: block;
      font-size: 24px;
      color: #D4A574;
      margin-bottom: 15px;
    }

    #again {
      margin-top: 25px;
      padding: 12px 24px;
      background: #D4A574;
      color: #0D0D0D;
      border: none;
      border-radius: 4px;
      font-family: 'Space Mono', monospace;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.2s;
      min-width: 44px;
      min-height: 44px;
    }

    #again:active {
      transform: scale(0.95);
      background: #FFD700;
    }

    .shard {
      position: absolute;
      width: 20px;
      height: 20px;
      background: #D4A574;
      border-radius: 50%;
      pointer-events: none;
      animation: explode 1s ease-out forwards;
    }

    @keyframes explode {
      to {
        transform: translate(var(--tx), var(--ty)) scale(0);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="instruction">Tap to crack your fortune</div>
    <div id="cookie">
      <div class="cookie-half"></div>
      <div class="cookie-half"></div>
    </div>
    <div id="fortune">
      <div id="fortune-text"></div>
      <button id="again">Another</button>
    </div>
  </div>

  <script>
    const fortunes = [
      "You will soon make something that surprises even you.",
      "The answer you're looking for is in the code you haven't written yet.",
      "A stranger on the internet will screenshot this.",
      "Your next idea will come at 3:47am. Write it down.",
      "You are 73% more interesting than you think you are.",
      "The bug is not in your code. It's in your assumptions.",
      "Someone is reading your old tweets right now.",
      "You will refactor something that was working fine.",
      "A forgotten project will become relevant again in 6 months.",
      "You are one commit away from something beautiful.",
      "The universe is indifferent, but your IDE loves you.",
      "Your coffee is 2°C away from optimal temperature.",
      "You will soon realize you've been spelling something wrong for years.",
      "A pull request you thought was dead will suddenly merge.",
      "You are thinking about a different project right now.",
      "The solution is simpler than you think, but you'll try 6 complex things first.",
      "Someone will fork your repo and never tell you why.",
      "You will close 23 browser tabs today. Tomorrow: 47 new ones.",
      "A comment you wrote in 2019 will save you in 2026.",
      "You are accumulating knowledge even when it doesn't feel like it.",
      "The function you're about to delete will be needed next week.",
      "You will soon receive an email that starts with 'Quick question...'",
      "Your next breakthrough will happen in the shower.",
      "A typo will teach you something about yourself.",
      "You are exactly where you need to be, even if you don't know where that is.",
      "The cookie was a metaphor. You already knew that.",
      "This fortune cookie contains 47 calories and infinite possibilities.",
      "You will read this fortune again someday and remember today.",
      "The real treasure was the bugs you fixed along the way.",
      "Your git history tells a story. It's a weird story, but it's yours."
    ];

    let audioStarted = false;
    let audioContext = null;

    const cookie = document.getElementById('cookie');
    const fortuneEl = document.getElementById('fortune');
    const fortuneText = document.getElementById('fortune-text');
    const instruction = document.getElementById('instruction');
    const againBtn = document.getElementById('again');

    function initAudio() {
      if (!audioStarted) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        audioStarted = true;
      }
    }

    function playCrack() {
      if (!audioContext) return;
      
      // Crack sound: noise burst with sharp envelope
      const now = audioContext.currentTime;
      const noise = audioContext.createBufferSource();
      const buffer = audioContext.createBuffer(1, audioContext.sampleRate * 0.2, audioContext.sampleRate);
      const data = buffer.getChannelData(0);
      
      for (let i = 0; i < data.length; i++) {
        data[i] = Math.random() * 2 - 1;
      }
      
      noise.buffer = buffer;
      
      const gain = audioContext.createGain();
      const filter = audioContext.createBiquadFilter();
      filter.type = 'bandpass';
      filter.frequency.value = 2000;
      filter.Q.value = 1;
      
      gain.gain.setValueAtTime(0.3, now);
      gain.gain.exponentialRampToValueAtTime(0.01, now + 0.2);
      
      noise.connect(filter);
      filter.connect(gain);
      gain.connect(audioContext.destination);
      
      noise.start(now);
      noise.stop(now + 0.2);
    }

    function createShards() {
      const rect = cookie.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      
      for (let i = 0; i < 12; i++) {
        const shard = document.createElement('div');
        shard.className = 'shard';
        shard.style.left = centerX + 'px';
        shard.style.top = centerY + 'px';
        
        const angle = (Math.PI * 2 * i) / 12;
        const distance = 150 + Math.random() * 100;
        const tx = Math.cos(angle) * distance;
        const ty = Math.sin(angle) * distance;
        
        shard.style.setProperty('--tx', tx + 'px');
        shard.style.setProperty('--ty', ty + 'px');
        
        document.body.appendChild(shard);
        
        setTimeout(() => shard.remove(), 1000);
      }
    }

    function crack() {
      initAudio();
      playCrack();
      
      cookie.classList.add('cracked');
      instruction.style.opacity = '0';
      
      createShards();
      
      setTimeout(() => {
        const fortune = fortunes[Math.floor(Math.random() * fortunes.length)];
        fortuneText.textContent = fortune;
        fortuneEl.classList.add('show');
      }, 300);
    }

    function reset() {
      cookie.classList.remove('cracked');
      fortuneEl.classList.remove('show');
      instruction.style.opacity = '1';
    }

    cookie.addEventListener('click', crack);
    againBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      reset();
    });
  </script>
</body>
</html>