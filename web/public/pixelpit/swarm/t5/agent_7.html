<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Fruit Splash Pop Game</title>
<style>
  body{margin:0;background:#0b0b43;overflow:hidden}
  canvas{display:block}
</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
const c = document.getElementById('c'), ctx = c.getContext('2d');
let W, H;
function resize(){ W = c.width = innerWidth; H = c.height = innerHeight }
resize(); onresize = resize;

let score = 0, targets = [], effects = [];

const fruitColors = [
  '#ff6b6b', // strawberry
  '#ffb400', // orange
  '#ffee61', // banana
  '#8ef6c9', // kiwi
  '#95c1e7', // blueberry
  '#ff4d99', // raspberry
  '#ff8c00'  // carrot
];

function randomFruitColor(){ return fruitColors[Math.floor(Math.random()*fruitColors.length)] }

function spawn(){
  targets.push({
    x: Math.random()*W,
    y: H+50,
    r: 30,
    speed: 1+Math.random()*2,
    color: randomFruitColor()
  });
}

function update(){
  targets.forEach(t=>t.y-=t.speed);
  targets = targets.filter(t=>t.y>-50);
  if(Math.random()<0.03) spawn();

  // update pop effects
  for(let i=effects.length-1;i>=0;i--){
    const e = effects[i];
    e.life--;
    if(e.life<=0){ effects.splice(i,1); continue; }
    e.r += 0.5;
    e.opacity = Math.max(e.life/20,0);
  }
}

function draw(){
  // background
  ctx.fillStyle = '#0b0b43';
  ctx.fillRect(0,0,W,H);

  // draw targets
  targets.forEach(t=>{
    const grd = ctx.createRadialGradient(t.x, t.y, t.r*0.4, t.x, t.y, t.r);
    grd.addColorStop(0,'#fff');
    grd.addColorStop(1,t.color);
    ctx.fillStyle = grd;
    ctx.beginPath();
    ctx.arc(t.x, t.y, t.r, 0, Math.PI*2);
    ctx.fill();
  });

  // draw pop effects
  effects.forEach(e=>{
    ctx.globalAlpha = e.opacity;
    const grd = ctx.createRadialGradient(e.x, e.y, 0, e.x, e.y, e.r);
    grd.addColorStop(0, e.color);
    grd.addColorStop(1, '#ffffff00');
    ctx.fillStyle = grd;
    ctx.beginPath();
    ctx.arc(e.x, e.y, e.r, 0, Math.PI*2);
    ctx.fill();
  });
  ctx.globalAlpha = 1;

  // score
  ctx.fillStyle = '#ffea00';
  ctx.font = '32px Arial';
  ctx.shadowColor = '#ffea00';
  ctx.shadowBlur = 8;
  ctx.fillText('Score: '+score, 20, 50);
}

function pop(x,y){
  for(let i=targets.length-1;i>=0;i--){
    const t = targets[i];
    if(Math.hypot(x-t.x,y-t.y) < t.r){
      targets.splice(i,1);
      score++;
      // create pop effect
      for(let p=0;p<12;p++){
        const angle = Math.random()*Math.PI*2;
        const speed = Math.random()*3+2;
        effects.push({
          x: t.x,
          y: t.y,
          vx: Math.cos(angle)*speed,
          vy: Math.sin(angle)*speed,
          r: 2,
          life: 20,
          opacity:1,
          color: t.color
        });
      }
      return;
    }
  }
}

c.onclick = e => pop(e.clientX, e.clientY);
c.ontouchstart = e=>{
  e.preventDefault();
  pop(e.touches[0].clientX, e.touches[0].clientY);
}

function loop(){ update(); draw(); requestAnimationFrame(loop); }
loop();
</script>
</body>
</html>