# Cache bust: 2025-08-02-01
[build]
builder = "NIXPACKS"

[deploy]
startCommand = "npm start"
healthcheckPath = "/api/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[environments.production]
[environments.production.variables]
NODE_ENV = "production"
NEXT_TELEMETRY_DISABLED = "1"

[[services]]
[services.vibeceo]
source = "web/"
[services.vibeceo.build]
builder = "NIXPACKS"
buildCommand = "cd .. && npm ci --workspace=web && cd web && npm run build"
[services.vibeceo.deploy]
startCommand = "npm start"
healthcheckPath = "/api/health"

[services.smsbot]
source = "sms-bot/"
[services.smsbot.build]
builder = "NIXPACKS"
buildCommand = "npm ci && npm run build"
[services.smsbot.deploy]
startCommand = "npm start"
healthcheckPath = "/health"
healthcheckTimeout = 300

[services.vibeceo-discord-bot]
source = "discord-bot/"
[services.vibeceo-discord-bot.build]
builder = "NIXPACKS"
buildCommand = "npm ci && npm run build"
[services.vibeceo-discord-bot.deploy]
startCommand = "npm start"