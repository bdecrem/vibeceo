<!DOCTYPE html>
<html lang="en">
<head>
    <title>Test ZAD App - Demo Mode</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; background: #111; color: #fff; padding: 20px; }
        .screen { display: none; }
        .screen.active { display: block; }
        button { padding: 10px 20px; margin: 10px; background: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; }
        input { padding: 8px; margin: 5px 0; }
        h1 { color: #0080ff; }
    </style>
</head>
<body>
    <div id="welcome-screen" class="screen active">
        <h1>TEST ZAD APP</h1>
        <p>Welcome! This app requires authentication.</p>
        <button onclick="showMainScreen()">New User</button>
        <button onclick="showMainScreen()">Returning User</button>
    </div>
    
    <div id="main-screen" class="screen">
        <h1>TEST ZAD APP - MAIN</h1>
        <div id="user-status">Welcome, <span id="current-user-label">User</span>!</div>
        <p>This is the main app content!</p>
        <button onclick="addTestData()">Add Test Data</button>
        <div id="data-list"></div>
    </div>

    <script>
        let currentUser = null;
        
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }
        
        function showMainScreen() {
            currentUser = { userLabel: 'Test User', participantId: 'test123' };
            showScreen('main-screen');
        }
        
        async function addTestData() {
            await save('test_item', { content: 'Test item ' + Date.now(), author: currentUser.userLabel });
            loadTestData();
        }
        
        async function loadTestData() {
            const items = await load('test_item');
            document.getElementById('data-list').innerHTML = items.map(item => 
                `<div>${item.content} by ${item.author}</div>`
            ).join('');
        }
        
        // Mock ZAD functions for non-demo mode
        window.save = window.save || async function(type, data) {
            console.log('Mock save:', type, data);
            return { success: true };
        };
        window.load = window.load || async function(type) {
            console.log('Mock load:', type);
            return [];
        };
        window.updateZadAuth = window.updateZadAuth || function(label, id) {
            console.log('Mock updateZadAuth:', label, id);
        };
    </script>
</body>
</html> 