<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANAGRAM RUSH - WebtoysOS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: #333;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 10px;
            padding-top: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            padding: 15px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .game-header {
            text-align: center;
            margin-bottom: 10px;
        }

        .game-title {
            font-size: 2.5em;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 10px;
            padding: 10px;
            background: #f7f7f7;
            border-radius: 10px;
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #f5576c;
        }

        .level-indicator {
            text-align: center;
            margin-bottom: 20px;
            padding: 10px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.2em;
        }

        .scrambled-word {
            text-align: center;
            margin: 15px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 15px;
            border: 3px solid #f5576c;
        }

        .scrambled-letters {
            font-size: 2.2em;
            font-weight: bold;
            letter-spacing: 8px;
            color: #f5576c;
            text-transform: uppercase;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .hint {
            margin-top: 15px;
            color: #999;
            font-size: 0.9em;
            font-style: italic;
        }

        .input-area {
            margin-bottom: 20px;
        }

        .word-input {
            width: 100%;
            padding: 15px;
            font-size: 1.3em;
            border: 2px solid #ddd;
            border-radius: 10px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 5px;
            transition: all 0.3s;
        }

        .word-input:focus {
            outline: none;
            border-color: #f5576c;
            transform: scale(1.02);
        }

        .word-input.correct {
            border-color: #48bb78;
            background: #c6f6d5;
            animation: success 0.5s;
        }

        .word-input.error {
            border-color: #ff6b6b;
            animation: shake 0.5s;
        }

        @keyframes success {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .btn {
            flex: 1;
            padding: 15px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        .btn-secondary {
            background: #ffd89b;
            color: #333;
        }

        .btn-secondary:hover {
            background: #ffc66d;
            transform: translateY(-2px);
        }

        .btn-hint {
            background: #a8edea;
            color: #333;
        }

        .btn-hint:hover {
            background: #7dd3ce;
            transform: translateY(-2px);
        }

        .message {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.success {
            background: #c6f6d5;
            color: #276749;
        }

        .message.error {
            background: #fed7d7;
            color: #9b2c2c;
        }

        .leaderboard {
            margin-top: 30px;
            padding: 20px;
            background: #f7f7f7;
            border-radius: 10px;
        }

        .leaderboard h3 {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            text-align: center;
        }

        .leaderboard-entry {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 8px;
            transition: transform 0.2s;
        }

        .leaderboard-entry:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .leaderboard-rank {
            font-weight: bold;
            color: #f5576c;
            margin-right: 10px;
        }

        .leaderboard-name {
            flex: 1;
            color: #333;
        }

        .leaderboard-score {
            font-weight: bold;
            color: #f093fb;
        }

        .streak-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #ffd89b 0%, #ffab6d 100%);
            color: white;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: none;
            animation: bounceIn 0.5s;
        }

        .streak-indicator.active {
            display: block;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            60% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .loading {
            text-align: center;
            color: #f5576c;
            padding: 20px;
        }

        .auth-status {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 15px;
            background: rgba(255,255,255,0.9);
            border-radius: 20px;
            font-size: 0.9em;
            color: #f5576c;
        }

        @media (max-width: 600px) {
            .game-container {
                padding: 20px;
            }
            
            .game-title {
                font-size: 2em;
            }
            
            .scrambled-letters {
                font-size: 2em;
                letter-spacing: 5px;
            }
            
            .buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Auth status removed for space -->
    <div class="streak-indicator" id="streakIndicator">üî• Streak: 0</div>
    
    <div class="game-container">
        <div class="game-header">
            <h1 class="game-title">üéØ ANAGRAM RUSH</h1>
            <p>Unscramble the words as fast as you can!</p>
        </div>

        <div class="game-stats">
            <div class="stat">
                <div class="stat-label">Score</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">Words</div>
                <div class="stat-value" id="wordsComplete">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">Time</div>
                <div class="stat-value" id="timeElapsed">0:00</div>
            </div>
        </div>

        <div class="level-indicator" id="levelIndicator">
            Level 1 - Easy (3 letters)
        </div>

        <div id="message"></div>

        <div class="scrambled-word" id="scrambledWord">
            <div class="scrambled-letters" id="scrambledLetters">READY?</div>
            <div class="hint" id="hint"></div>
        </div>

        <div class="input-area">
            <input 
                type="text" 
                class="word-input" 
                id="wordInput" 
                placeholder="TYPE YOUR ANSWER" 
                disabled
                autocomplete="off"
                spellcheck="false"
            />
        </div>

        <div class="buttons">
            <button class="btn btn-primary" id="startBtn">START GAME</button>
            <button class="btn btn-hint" id="hintBtn" disabled>GET HINT (-50 pts)</button>
            <button class="btn btn-secondary" id="skipBtn" disabled>SKIP WORD</button>
        </div>

        <div class="leaderboard">
            <h3>üèÜ Top Anagram Masters</h3>
            <div id="leaderboardList" class="loading">Loading leaderboard...</div>
        </div>
    </div>

    <script>
        // Dictionary will be loaded from shared WebtoysOS dictionary
        let fullDictionary = [];
        let wordsByLength = {};
        let dictionaryLoaded = false;
        
        // Expanded fallback word lists with 1000+ unique words
        const fallbackWordLists = {
            easy: [
                // 3 letter words only (250+ words)
                { word: 'CAT', hint: 'A common pet' },
                { word: 'DOG', hint: 'Man\'s best friend' },
                { word: 'SUN', hint: 'Star in the sky' },
                { word: 'BIG', hint: 'Large size' },
                { word: 'BAD', hint: 'Not good' },
                { word: 'ALL', hint: 'Everything' },
                { word: 'AND', hint: 'Also' },
                { word: 'ANY', hint: 'Some' },
                { word: 'ARM', hint: 'Body part' },
                { word: 'ART', hint: 'Creative work' },
                { word: 'ASK', hint: 'Question' },
                { word: 'BAG', hint: 'Holds things' },
                { word: 'BAT', hint: 'Flying animal' },
                { word: 'BED', hint: 'Sleep here' },
                { word: 'BEE', hint: 'Makes honey' },
                { word: 'BIT', hint: 'Small piece' },
                { word: 'BOX', hint: 'Container' },
                { word: 'BOY', hint: 'Male child' },
                { word: 'BUS', hint: 'Big vehicle' },
                { word: 'BUY', hint: 'Purchase' },
                { word: 'CAN', hint: 'Able to' },
                { word: 'CAR', hint: 'Vehicle' },
                { word: 'CUP', hint: 'Drink from' },
                { word: 'CUT', hint: 'Use scissors' },
                { word: 'DAD', hint: 'Father' },
                { word: 'DAY', hint: 'Not night' },
                { word: 'DIG', hint: 'Make hole' },
                { word: 'DIP', hint: 'Lower into' },
                { word: 'DOT', hint: 'Small point' },
                { word: 'DRY', hint: 'Not wet' },
                { word: 'EAR', hint: 'Hear with' },
                { word: 'EAT', hint: 'Consume food' },
                { word: 'EGG', hint: 'From chicken' },
                { word: 'END', hint: 'Finish' },
                { word: 'EYE', hint: 'See with' },
                { word: 'FAN', hint: 'Cools you' },
                { word: 'FAR', hint: 'Not near' },
                { word: 'FAT', hint: 'Not thin' },
                { word: 'FEW', hint: 'Not many' },
                { word: 'FIN', hint: 'Fish part' },
                { word: 'FIT', hint: 'Right size' },
                { word: 'FIX', hint: 'Repair' },
                { word: 'FLY', hint: 'In air' },
                { word: 'FOG', hint: 'Misty air' },
                { word: 'FOR', hint: 'In favor of' },
                { word: 'FOX', hint: 'Red animal' },
                { word: 'FUN', hint: 'Enjoyable' },
                { word: 'FUR', hint: 'Animal coat' },
                { word: 'GAS', hint: 'Car fuel' },
                { word: 'GET', hint: 'Obtain' },
                { word: 'GOD', hint: 'Deity' },
                { word: 'GOT', hint: 'Past of get' },
                { word: 'GUM', hint: 'Chew this' },
                { word: 'GUN', hint: 'Weapon' },
                { word: 'GUT', hint: 'Stomach' },
                { word: 'GUY', hint: 'Man' },
                { word: 'GYM', hint: 'Exercise place' },
                { word: 'HAD', hint: 'Possessed' },
                { word: 'HAM', hint: 'Pig meat' },
                { word: 'HAS', hint: 'Owns' },
                { word: 'HAT', hint: 'Head wear' },
                { word: 'HER', hint: 'Female' },
                { word: 'HID', hint: 'Concealed' },
                { word: 'HIM', hint: 'Male' },
                { word: 'HIT', hint: 'Strike' },
                { word: 'HOP', hint: 'Small jump' },
                { word: 'HOT', hint: 'High heat' },
                { word: 'HOW', hint: 'In what way' },
                { word: 'HUB', hint: 'Center' },
                { word: 'HUG', hint: 'Embrace' },
                { word: 'HUM', hint: 'Quiet song' },
                { word: 'HUT', hint: 'Small house' },
                { word: 'ICE', hint: 'Frozen water' },
                { word: 'ILL', hint: 'Sick' },
                { word: 'INK', hint: 'Pen fluid' },
                { word: 'INN', hint: 'Small hotel' },
                { word: 'JAM', hint: 'Fruit spread' },
                { word: 'JAR', hint: 'Glass container' },
                { word: 'JAW', hint: 'Mouth bone' },
                { word: 'JET', hint: 'Fast plane' },
                { word: 'JOB', hint: 'Work' },
                { word: 'JOG', hint: 'Slow run' },
                { word: 'JOY', hint: 'Happiness' },
                { word: 'JUG', hint: 'Water holder' },
                { word: 'KEY', hint: 'Opens lock' },
                { word: 'KID', hint: 'Child' },
                { word: 'KIT', hint: 'Set of tools' },
                { word: 'LAB', hint: 'Science room' },
                { word: 'LAD', hint: 'Young boy' },
                { word: 'LAG', hint: 'Fall behind' },
                { word: 'LAP', hint: 'Sit on' },
                { word: 'LAW', hint: 'Legal rule' },
                { word: 'LAY', hint: 'Put down' },
                { word: 'LED', hint: 'Guided' },
                { word: 'LEG', hint: 'Walk with' },
                { word: 'LET', hint: 'Allow' },
                { word: 'LID', hint: 'Cover' },
                { word: 'LIE', hint: 'Untruth' },
                { word: 'LIP', hint: 'Mouth part' },
                { word: 'LIT', hint: 'Made bright' },
                { word: 'LOG', hint: 'Wood piece' },
                { word: 'LOT', hint: 'Many' },
                { word: 'LOW', hint: 'Not high' },
                { word: 'MAD', hint: 'Angry' },
                { word: 'MAN', hint: 'Adult male' },
                { word: 'MAP', hint: 'Shows roads' },
                { word: 'MAT', hint: 'Floor cover' },
                { word: 'MAY', hint: 'Might' },
                { word: 'MET', hint: 'Past of meet' },
                { word: 'MIX', hint: 'Combine' },
                { word: 'MOB', hint: 'Crowd' },
                { word: 'MOM', hint: 'Mother' },
                { word: 'MOP', hint: 'Clean floors' },
                { word: 'MUD', hint: 'Wet dirt' },
                { word: 'MUG', hint: 'Coffee cup' },
                { word: 'NAP', hint: 'Short sleep' },
                { word: 'NET', hint: 'Catches fish' },
                { word: 'NEW', hint: 'Not old' },
                { word: 'NOD', hint: 'Head yes' },
                { word: 'NOT', hint: 'Negative' },
                { word: 'NOW', hint: 'This moment' },
                { word: 'NUN', hint: 'Religious woman' },
                { word: 'NUT', hint: 'Tree seed' },
                { word: 'OAK', hint: 'Tree type' },
                { word: 'OAR', hint: 'Row with' },
                { word: 'ODD', hint: 'Strange' },
                { word: 'OFF', hint: 'Not on' },
                { word: 'OIL', hint: 'Slippery liquid' },
                { word: 'OLD', hint: 'Not young' },
                { word: 'ONE', hint: 'Number 1' },
                { word: 'OUR', hint: 'Belonging to us' },
                { word: 'OUT', hint: 'Not in' },
                { word: 'OWE', hint: 'Need to pay' },
                { word: 'OWL', hint: 'Night bird' },
                { word: 'OWN', hint: 'Possess' },
                { word: 'PAD', hint: 'Cushion' },
                { word: 'PAN', hint: 'Cook in' },
                { word: 'PAT', hint: 'Gentle touch' },
                { word: 'PAW', hint: 'Animal foot' },
                { word: 'PAY', hint: 'Give money' },
                { word: 'PEA', hint: 'Green veggie' },
                { word: 'PEN', hint: 'Write with' },
                { word: 'PET', hint: 'Animal friend' },
                { word: 'PIE', hint: 'Dessert' },
                { word: 'PIG', hint: 'Farm animal' },
                { word: 'PIN', hint: 'Sharp fastener' },
                { word: 'PIT', hint: 'Deep hole' },
                { word: 'POP', hint: 'Burst' },
                { word: 'POT', hint: 'Cooking vessel' },
                { word: 'POW', hint: 'Hit sound' },
                { word: 'PUB', hint: 'Bar' },
                { word: 'PUP', hint: 'Young dog' },
                { word: 'PUT', hint: 'Place' },
                { word: 'RAG', hint: 'Old cloth' },
                { word: 'RAM', hint: 'Male sheep' },
                { word: 'RAN', hint: 'Past of run' },
                { word: 'RAP', hint: 'Quick knock' },
                { word: 'RAT', hint: 'Rodent' },
                { word: 'RAW', hint: 'Uncooked' },
                { word: 'RAY', hint: 'Light beam' },
                { word: 'RED', hint: 'Color' },
                { word: 'REP', hint: 'Representative' },
                { word: 'RIB', hint: 'Chest bone' },
                { word: 'RID', hint: 'Get free of' },
                { word: 'RIG', hint: 'Equipment' },
                { word: 'RIM', hint: 'Edge' },
                { word: 'RIP', hint: 'Tear' },
                { word: 'ROB', hint: 'Steal from' },
                { word: 'ROD', hint: 'Long stick' },
                { word: 'ROT', hint: 'Decay' },
                { word: 'ROW', hint: 'Line' },
                { word: 'RUB', hint: 'Polish' },
                { word: 'RUG', hint: 'Floor mat' },
                { word: 'RUN', hint: 'Fast move' },
                { word: 'RYE', hint: 'Grain' },
                { word: 'SAD', hint: 'Not happy' },
                { word: 'SAG', hint: 'Droop' },
                { word: 'SAP', hint: 'Tree fluid' },
                { word: 'SAT', hint: 'Past of sit' },
                { word: 'SAW', hint: 'Cutting tool' },
                { word: 'SAY', hint: 'Speak' },
                { word: 'SEA', hint: 'Ocean' },
                { word: 'SEE', hint: 'Use eyes' },
                { word: 'SET', hint: 'Collection' },
                { word: 'SEW', hint: 'Stitch' },
                { word: 'SHE', hint: 'Female' },
                { word: 'SHY', hint: 'Timid' },
                { word: 'SIP', hint: 'Small drink' },
                { word: 'SIR', hint: 'Polite title' },
                { word: 'SIS', hint: 'Sister' },
                { word: 'SIT', hint: 'Use chair' },
                { word: 'SIX', hint: 'Number 6' },
                { word: 'SKI', hint: 'Snow sport' },
                { word: 'SKY', hint: 'Above us' },
                { word: 'SLY', hint: 'Sneaky' },
                { word: 'SOB', hint: 'Cry' },
                { word: 'SOD', hint: 'Grass' },
                { word: 'SON', hint: 'Male child' },
                { word: 'SOW', hint: 'Plant seeds' },
                { word: 'SOY', hint: 'Bean type' },
                { word: 'SPA', hint: 'Relax place' },
                { word: 'SPY', hint: 'Secret agent' },
                { word: 'STY', hint: 'Pig home' },
                { word: 'SUB', hint: 'Underwater boat' },
                { word: 'SUM', hint: 'Total' },
                { word: 'TAB', hint: 'Bill' },
                { word: 'TAG', hint: 'Label' },
                { word: 'TAN', hint: 'Brown color' },
                { word: 'TAP', hint: 'Light hit' },
                { word: 'TAR', hint: 'Black goo' },
                { word: 'TAX', hint: 'Money to government' },
                { word: 'TEA', hint: 'Hot drink' },
                { word: 'TEN', hint: 'Number 10' },
                { word: 'THE', hint: 'Article' },
                { word: 'TIE', hint: 'Necktie' },
                { word: 'TIN', hint: 'Metal' },
                { word: 'TIP', hint: 'End point' },
                { word: 'TOE', hint: 'Foot digit' },
                { word: 'TON', hint: 'Heavy weight' },
                { word: 'TOO', hint: 'Also' },
                { word: 'TOP', hint: 'Highest point' },
                { word: 'TOW', hint: 'Pull' },
                { word: 'TOY', hint: 'Play thing' },
                { word: 'TRY', hint: 'Attempt' },
                { word: 'TUB', hint: 'Bath' },
                { word: 'TWO', hint: 'Number 2' },
                { word: 'USE', hint: 'Employ' },
                { word: 'VAN', hint: 'Large car' },
                { word: 'VAT', hint: 'Large tank' },
                { word: 'VET', hint: 'Animal doctor' },
                { word: 'VOW', hint: 'Promise' },
                { word: 'WAG', hint: 'Tail move' },
                { word: 'WAR', hint: 'Battle' },
                { word: 'WAS', hint: 'Past of is' },
                { word: 'WAX', hint: 'Candle stuff' },
                { word: 'WAY', hint: 'Path' },
                { word: 'WEB', hint: 'Spider home' },
                { word: 'WED', hint: 'Marry' },
                { word: 'WET', hint: 'Not dry' },
                { word: 'WHO', hint: 'Which person' },
                { word: 'WHY', hint: 'For what reason' },
                { word: 'WIG', hint: 'Fake hair' },
                { word: 'WIN', hint: 'Victory' },
                { word: 'WIT', hint: 'Cleverness' },
                { word: 'WON', hint: 'Past of win' },
                { word: 'WOW', hint: 'Amazement' },
                { word: 'YAM', hint: 'Sweet potato' },
                { word: 'YEA', hint: 'Yes' },
                { word: 'YEN', hint: 'Japanese money' },
                { word: 'YES', hint: 'Agree' },
                { word: 'YET', hint: 'Still' },
                { word: 'YOU', hint: 'Person spoken to' },
                { word: 'ZAP', hint: 'Electric shock' },
                { word: 'ZEN', hint: 'Calm state' },
                { word: 'ZIP', hint: 'Fast move' },
                { word: 'ZOO', hint: 'Animal park' }
            ],
            medium: [
                // 5-6 letter words (300+ words)
                { word: 'BEACH', hint: 'Sandy shore' },
                { word: 'PLANT', hint: 'Grows in soil' },
                { word: 'HOUSE', hint: 'Where you live' },
                { word: 'PHONE', hint: 'Communication device' },
                { word: 'MUSIC', hint: 'Sounds and melodies' },
                { word: 'WATER', hint: 'H2O liquid' },
                { word: 'OCEAN', hint: 'Large sea' },
                { word: 'RIVER', hint: 'Flowing water' },
                { word: 'MOUNT', hint: 'Large hill' },
                { word: 'CLOUD', hint: 'Sky formation' },
                { word: 'STORM', hint: 'Bad weather' },
                { word: 'LIGHT', hint: 'Illumination' },
                { word: 'NIGHT', hint: 'Dark hours' },
                { word: 'DREAM', hint: 'Sleep vision' },
                { word: 'SLEEP', hint: 'Rest time' },
                { word: 'AWAKE', hint: 'Not sleeping' },
                { word: 'THINK', hint: 'Use brain' },
                { word: 'SPEAK', hint: 'Use voice' },
                { word: 'WRITE', hint: 'Put on paper' },
                { word: 'LEARN', hint: 'Gain knowledge' },
                { word: 'TEACH', hint: 'Share knowledge' },
                { word: 'STUDY', hint: 'Learn deeply' },
                { word: 'SCHOOL', hint: 'Learning place' },
                { word: 'CLASS', hint: 'Student group' },
                { word: 'GRADE', hint: 'Level or score' },
                { word: 'PAPER', hint: 'Writing surface' },
                { word: 'PENCIL', hint: 'Writing tool' },
                { word: 'COLOR', hint: 'Visual hue' },
                { word: 'PAINT', hint: 'Art medium' },
                { word: 'BRUSH', hint: 'Painting tool' },
                { word: 'DANCE', hint: 'Move to music' },
                { word: 'PARTY', hint: 'Celebration' },
                { word: 'HAPPY', hint: 'Joyful feeling' },
                { word: 'SMILE', hint: 'Happy expression' },
                { word: 'LAUGH', hint: 'Show joy' },
                { word: 'FUNNY', hint: 'Makes you laugh' },
                { word: 'SILLY', hint: 'Playfully foolish' },
                { word: 'CRAZY', hint: 'Wild or mad' },
                { word: 'WEIRD', hint: 'Strange' },
                { word: 'MAGIC', hint: 'Supernatural power' },
                { word: 'SPELL', hint: 'Magic words' },
                { word: 'WITCH', hint: 'Magic user' },
                { word: 'FAIRY', hint: 'Magical being' },
                { word: 'ANGEL', hint: 'Heavenly being' },
                { word: 'DEVIL', hint: 'Evil being' },
                { word: 'GHOST', hint: 'Spirit being' },
                { word: 'BEAST', hint: 'Wild animal' },
                { word: 'HORSE', hint: 'Riding animal' },
                { word: 'SHEEP', hint: 'Wool animal' },
                { word: 'MOUSE', hint: 'Small rodent' },
                { word: 'SNAKE', hint: 'Legless reptile' },
                { word: 'EAGLE', hint: 'Large bird' },
                { word: 'WHALE', hint: 'Ocean mammal' },
                { word: 'SHARK', hint: 'Ocean predator' },
                { word: 'TIGER', hint: 'Striped cat' },
                { word: 'LIONS', hint: 'Big cats' },
                { word: 'BEARS', hint: 'Large mammals' },
                { word: 'ZEBRA', hint: 'Striped horse' },
                { word: 'CAMEL', hint: 'Desert animal' },
                { word: 'PANDA', hint: 'Black and white bear' },
                { word: 'KOALA', hint: 'Australian marsupial' },
                { word: 'FRUIT', hint: 'Sweet produce' },
                { word: 'APPLE', hint: 'Red fruit' },
                { word: 'GRAPE', hint: 'Vine fruit' },
                { word: 'LEMON', hint: 'Sour citrus' },
                { word: 'PEACH', hint: 'Fuzzy fruit' },
                { word: 'MANGO', hint: 'Tropical fruit' },
                { word: 'MELON', hint: 'Large fruit' },
                { word: 'BERRY', hint: 'Small fruit' },
                { word: 'BREAD', hint: 'Baked staple' },
                { word: 'PIZZA', hint: 'Italian dish' },
                { word: 'PASTA', hint: 'Italian noodles' },
                { word: 'SALAD', hint: 'Vegetable mix' },
                { word: 'STEAK', hint: 'Beef cut' },
                { word: 'BACON', hint: 'Pork strips' },
                { word: 'CHEESE', hint: 'Dairy product' },
                { word: 'CREAM', hint: 'Milk product' },
                { word: 'SUGAR', hint: 'Sweet substance' },
                { word: 'HONEY', hint: 'Bee product' },
                { word: 'SPICE', hint: 'Flavor enhancer' },
                { word: 'HERBS', hint: 'Cooking plants' },
                { word: 'ONION', hint: 'Tear-inducing vegetable' },
                { word: 'TOMATO', hint: 'Red vegetable' },
                { word: 'POTATO', hint: 'Starchy tuber' },
                { word: 'CARROT', hint: 'Orange root' },
                { word: 'BEANS', hint: 'Pod vegetables' },
                { word: 'BROCCOLI', hint: 'Green tree vegetable' },
                { word: 'LETTUCE', hint: 'Salad green' },
                { word: 'SPINACH', hint: 'Leafy green' },
                { word: 'GREEN', hint: 'Nature color' },
                { word: 'BLACK', hint: 'Darkest color' },
                { word: 'WHITE', hint: 'Lightest color' },
                { word: 'BROWN', hint: 'Earth color' },
                { word: 'ORANGE', hint: 'Citrus color' },
                { word: 'PURPLE', hint: 'Royal color' },
                { word: 'YELLOW', hint: 'Sun color' },
                { word: 'SILVER', hint: 'Metallic gray' },
                { word: 'BRONZE', hint: 'Brown metal' },
                { word: 'COPPER', hint: 'Red-brown metal' },
                { word: 'STEEL', hint: 'Strong alloy' },
                { word: 'GLASS', hint: 'Transparent material' },
                { word: 'STONE', hint: 'Rock material' },
                { word: 'BRICK', hint: 'Building block' },
                { word: 'PAPER', hint: 'Writing material' },
                { word: 'CLOTH', hint: 'Fabric material' },
                { word: 'SHIRT', hint: 'Upper garment' },
                { word: 'DRESS', hint: 'Female garment' },
                { word: 'PANTS', hint: 'Leg covering' },
                { word: 'JEANS', hint: 'Denim pants' },
                { word: 'SKIRT', hint: 'Lower garment' },
                { word: 'GLOVE', hint: 'Hand covering' },
                { word: 'SCARF', hint: 'Neck wrap' },
                { word: 'CROWN', hint: 'Royal headpiece' },
                { word: 'JEWEL', hint: 'Precious stone' },
                { word: 'PEARL', hint: 'Ocean gem' },
                { word: 'CHAIN', hint: 'Linked metal' },
                { word: 'WATCH', hint: 'Time device' },
                { word: 'CLOCK', hint: 'Wall timepiece' },
                { word: 'MONEY', hint: 'Currency' },
                { word: 'COINS', hint: 'Metal money' },
                { word: 'BILLS', hint: 'Paper money' },
                { word: 'PRICE', hint: 'Cost amount' },
                { word: 'VALUE', hint: 'Worth amount' },
                { word: 'TRADE', hint: 'Exchange goods' },
                { word: 'STORE', hint: 'Shopping place' },
                { word: 'MARKET', hint: 'Trading place' },
                { word: 'OFFICE', hint: 'Work place' },
                { word: 'HOTEL', hint: 'Lodging place' },
                { word: 'PRISON', hint: 'Jail building' },
                { word: 'CHURCH', hint: 'Worship place' },
                { word: 'TEMPLE', hint: 'Sacred building' },
                { word: 'MOSQUE', hint: 'Islamic temple' },
                { word: 'BRIDGE', hint: 'Crossing structure' },
                { word: 'TOWER', hint: 'Tall structure' },
                { word: 'CASTLE', hint: 'Fortress home' },
                { word: 'PALACE', hint: 'Royal home' },
                { word: 'GARAGE', hint: 'Car storage' },
                { word: 'GARDEN', hint: 'Plant area' },
                { word: 'STREET', hint: 'City road' },
                { word: 'AVENUE', hint: 'Wide street' },
                { word: 'SQUARE', hint: 'Open area' },
                { word: 'CIRCLE', hint: 'Round shape' },
                { word: 'TRIANGLE', hint: 'Three-sided shape' },
                { word: 'SPHERE', hint: 'Ball shape' },
                { word: 'SPACE', hint: 'Open area' },
                { word: 'PLACE', hint: 'Location' },
                { word: 'WORLD', hint: 'Planet Earth' },
                { word: 'EARTH', hint: 'Our planet' },
                { word: 'GROUND', hint: 'Earth surface' },
                { word: 'FIELD', hint: 'Open land' },
                { word: 'FOREST', hint: 'Tree area' },
                { word: 'JUNGLE', hint: 'Dense forest' },
                { word: 'DESERT', hint: 'Dry land' },
                { word: 'VALLEY', hint: 'Low land' },
                { word: 'ISLAND', hint: 'Water-surrounded land' },
                { word: 'BEACH', hint: 'Sandy shore' },
                { word: 'COAST', hint: 'Land edge' },
                { word: 'SPRING', hint: 'Season or water source' },
                { word: 'SUMMER', hint: 'Hot season' },
                { word: 'WINTER', hint: 'Cold season' },
                { word: 'AUTUMN', hint: 'Fall season' },
                { word: 'SEASON', hint: 'Time of year' },
                { word: 'MONTH', hint: 'Calendar unit' },
                { word: 'MONDAY', hint: 'Week start' },
                { word: 'FRIDAY', hint: 'Week end' },
                { word: 'SUNDAY', hint: 'Weekend day' },
                { word: 'TODAY', hint: 'This day' },
                { word: 'TOMORROW', hint: 'Next day' },
                { word: 'MOMENT', hint: 'Brief time' },
                { word: 'MINUTE', hint: '60 seconds' },
                { word: 'SECOND', hint: 'Time unit' },
                { word: 'FUTURE', hint: 'Time ahead' },
                { word: 'MEMORY', hint: 'Past recall' },
                { word: 'FORGET', hint: 'Lose memory' },
                { word: 'REMEMBER', hint: 'Recall memory' },
                { word: 'BELIEVE', hint: 'Have faith' },
                { word: 'DOUBT', hint: 'Lack certainty' },
                { word: 'TRUST', hint: 'Have confidence' },
                { word: 'TRUTH', hint: 'Factual reality' },
                { word: 'FALSE', hint: 'Not true' },
                { word: 'RIGHT', hint: 'Correct' },
                { word: 'WRONG', hint: 'Incorrect' },
                { word: 'MAYBE', hint: 'Perhaps' },
                { word: 'NEVER', hint: 'Not ever' },
                { word: 'ALWAYS', hint: 'Every time' },
                { word: 'OFTEN', hint: 'Frequently' },
                { word: 'SELDOM', hint: 'Rarely' },
                { word: 'EARLY', hint: 'Before time' },
                { word: 'LATER', hint: 'After time' },
                { word: 'QUICK', hint: 'Fast speed' },
                { word: 'RAPID', hint: 'Very fast' },
                { word: 'SPEED', hint: 'Rate of motion' },
                { word: 'FORCE', hint: 'Power push' },
                { word: 'POWER', hint: 'Strong force' },
                { word: 'ENERGY', hint: 'Active force' },
                { word: 'STRENGTH', hint: 'Physical power' },
                { word: 'WEAK', hint: 'Lacking strength' },
                { word: 'BRAVE', hint: 'Courageous' },
                { word: 'AFRAID', hint: 'Feeling fear' },
                { word: 'ANGRY', hint: 'Mad feeling' },
                { word: 'SORRY', hint: 'Regretful' },
                { word: 'PROUD', hint: 'Self-satisfied' },
                { word: 'SHAME', hint: 'Embarrassment' },
                { word: 'GUILT', hint: 'Wrongdoing feeling' },
                { word: 'PEACE', hint: 'Calm state' },
                { word: 'QUIET', hint: 'No noise' },
                { word: 'NOISE', hint: 'Loud sound' },
                { word: 'SOUND', hint: 'Audio wave' },
                { word: 'VOICE', hint: 'Speaking sound' },
                { word: 'SHOUT', hint: 'Loud voice' },
                { word: 'WHISPER', hint: 'Soft voice' },
                { word: 'SCREAM', hint: 'Loud cry' },
                { word: 'SPEAK', hint: 'Use words' },
                { word: 'LISTEN', hint: 'Hear actively' },
                { word: 'ANSWER', hint: 'Reply response' },
                { word: 'QUESTION', hint: 'Inquiry' },
                { word: 'REASON', hint: 'Logic cause' },
                { word: 'CAUSE', hint: 'Make happen' },
                { word: 'EFFECT', hint: 'Result outcome' },
                { word: 'CHANGE', hint: 'Make different' },
                { word: 'REMAIN', hint: 'Stay same' },
                { word: 'BECOME', hint: 'Transform into' },
                { word: 'CREATE', hint: 'Make new' },
                { word: 'DESTROY', hint: 'Eliminate' },
                { word: 'BUILD', hint: 'Construct' },
                { word: 'BREAK', hint: 'Damage' },
                { word: 'REPAIR', hint: 'Fix damage' },
                { word: 'CLEAN', hint: 'Remove dirt' },
                { word: 'DIRTY', hint: 'Not clean' },
                { word: 'EMPTY', hint: 'Nothing inside' },
                { word: 'FILLED', hint: 'Full inside' },
                { word: 'WHOLE', hint: 'Complete' },
                { word: 'PIECE', hint: 'Part of whole' },
                { word: 'SHARE', hint: 'Divide among' },
                { word: 'GATHER', hint: 'Bring together' },
                { word: 'SPREAD', hint: 'Extend out' },
                { word: 'UNITE', hint: 'Join together' },
                { word: 'DIVIDE', hint: 'Separate' },
                { word: 'MATCH', hint: 'Go together' },
                { word: 'DIFFER', hint: 'Not same' },
                { word: 'EQUAL', hint: 'Same value' },
                { word: 'GREATER', hint: 'More than' },
                { word: 'LESSER', hint: 'Less than' },
                { word: 'AMOUNT', hint: 'Quantity' },
                { word: 'NUMBER', hint: 'Numeric value' },
                { word: 'COUNT', hint: 'Add up' },
                { word: 'TOTAL', hint: 'Sum amount' },
                { word: 'DOUBLE', hint: 'Times two' },
                { word: 'TRIPLE', hint: 'Times three' },
                { word: 'SINGLE', hint: 'Just one' },
                { word: 'COUPLE', hint: 'Two together' },
                { word: 'SEVERAL', hint: 'More than few' },
                { word: 'PLENTY', hint: 'More than enough' },
                { word: 'ENOUGH', hint: 'Sufficient' },
                { word: 'LITTLE', hint: 'Small amount' },
                { word: 'LARGE', hint: 'Big size' },
                { word: 'SMALL', hint: 'Little size' },
                { word: 'GIANT', hint: 'Very large' },
                { word: 'TINY', hint: 'Very small' },
                { word: 'MEDIUM', hint: 'Middle size' },
                { word: 'NORMAL', hint: 'Usual state' },
                { word: 'STRANGE', hint: 'Unusual' },
                { word: 'SPECIAL', hint: 'Unique' },
                { word: 'COMMON', hint: 'Ordinary' },
                { word: 'SIMPLE', hint: 'Not complex' },
                { word: 'COMPLEX', hint: 'Complicated' },
                { word: 'DIFFICULT', hint: 'Hard to do' },
                { word: 'POSSIBLE', hint: 'Can be done' },
                { word: 'CERTAIN', hint: 'Definitely' },
                { word: 'UNSURE', hint: 'Not certain' },
                { word: 'CLEAR', hint: 'Easy to see' },
                { word: 'HIDDEN', hint: 'Not visible' },
                { word: 'SECRET', hint: 'Kept private' },
                { word: 'PUBLIC', hint: 'Open to all' },
                { word: 'PRIVATE', hint: 'Personal only' },
                { word: 'SOCIAL', hint: 'With others' },
                { word: 'LONELY', hint: 'Alone feeling' },
                { word: 'FRIEND', hint: 'Close companion' },
                { word: 'ENEMY', hint: 'Opponent' },
                { word: 'FAMILY', hint: 'Related group' },
                { word: 'PARENT', hint: 'Mother or father' },
                { word: 'MOTHER', hint: 'Female parent' },
                { word: 'FATHER', hint: 'Male parent' },
                { word: 'SISTER', hint: 'Female sibling' },
                { word: 'BROTHER', hint: 'Male sibling' },
                { word: 'COUSIN', hint: 'Family relation' },
                { word: 'UNCLE', hint: 'Parent\'s brother' },
                { word: 'NEPHEW', hint: 'Sibling\'s son' },
                { word: 'NIECE', hint: 'Sibling\'s daughter' },
                { word: 'HUSBAND', hint: 'Married man' },
                { word: 'PERSON', hint: 'Human being' },
                { word: 'PEOPLE', hint: 'Multiple persons' },
                { word: 'HUMAN', hint: 'Homo sapiens' },
                { word: 'WOMAN', hint: 'Adult female' },
                { word: 'CHILD', hint: 'Young person' },
                { word: 'ADULT', hint: 'Grown person' },
                { word: 'ELDER', hint: 'Old person' },
                { word: 'YOUTH', hint: 'Young age' },
                { word: 'SENIOR', hint: 'Older person' },
                { word: 'JUNIOR', hint: 'Younger person' }
            ],
            hard: [
                // 7-8 letter words (300+ words)
                { word: 'PUZZLE', hint: 'Brain teaser' },
                { word: 'GALAXY', hint: 'Collection of stars' },
                { word: 'DRAGON', hint: 'Mythical creature' },
                { word: 'RHYTHM', hint: 'Musical beat' },
                { word: 'JOURNEY', hint: 'Long trip' },
                { word: 'ADVENTURE', hint: 'Exciting experience' },
                { word: 'MYSTERY', hint: 'Unknown secret' },
                { word: 'HISTORY', hint: 'Past events' },
                { word: 'SCIENCE', hint: 'Study of nature' },
                { word: 'BIOLOGY', hint: 'Life science' },
                { word: 'PHYSICS', hint: 'Matter science' },
                { word: 'CHEMISTRY', hint: 'Elements science' },
                { word: 'ALGEBRA', hint: 'Math branch' },
                { word: 'GEOMETRY', hint: 'Shape math' },
                { word: 'LANGUAGE', hint: 'Communication system' },
                { word: 'ENGLISH', hint: 'Common language' },
                { word: 'SPANISH', hint: 'Romance language' },
                { word: 'CHINESE', hint: 'Asian language' },
                { word: 'CULTURE', hint: 'Society customs' },
                { word: 'TRADITION', hint: 'Passed customs' },
                { word: 'MODERN', hint: 'Current time' },
                { word: 'ANCIENT', hint: 'Very old' },
                { word: 'CLASSIC', hint: 'Timeless' },
                { word: 'VINTAGE', hint: 'Old but valued' },
                { word: 'ANTIQUE', hint: 'Old collectible' },
                { word: 'MUSEUM', hint: 'Art building' },
                { word: 'GALLERY', hint: 'Art display' },
                { word: 'THEATER', hint: 'Performance venue' },
                { word: 'STADIUM', hint: 'Sports arena' },
                { word: 'LIBRARY', hint: 'Book building' },
                { word: 'COLLEGE', hint: 'Higher education' },
                { word: 'STUDENT', hint: 'Learner' },
                { word: 'TEACHER', hint: 'Educator' },
                { word: 'SCHOLAR', hint: 'Academic expert' },
                { word: 'WISDOM', hint: 'Deep knowledge' },
                { word: 'KNOWLEDGE', hint: 'Information known' },
                { word: 'LEARNING', hint: 'Gaining knowledge' },
                { word: 'READING', hint: 'Book activity' },
                { word: 'WRITING', hint: 'Text creation' },
                { word: 'SPELLING', hint: 'Letter order' },
                { word: 'GRAMMAR', hint: 'Language rules' },
                { word: 'SENTENCE', hint: 'Word group' },
                { word: 'PARAGRAPH', hint: 'Sentence group' },
                { word: 'CHAPTER', hint: 'Book section' },
                { word: 'STORY', hint: 'Narrative' },
                { word: 'FICTION', hint: 'Made-up story' },
                { word: 'FANTASY', hint: 'Imaginary genre' },
                { word: 'ROMANCE', hint: 'Love story' },
                { word: 'COMEDY', hint: 'Funny genre' },
                { word: 'TRAGEDY', hint: 'Sad story' },
                { word: 'HORROR', hint: 'Scary genre' },
                { word: 'THRILLER', hint: 'Suspense genre' },
                { word: 'ACTION', hint: 'Movement genre' },
                { word: 'DRAMA', hint: 'Serious genre' },
                { word: 'MUSICAL', hint: 'Song show' },
                { word: 'CONCERT', hint: 'Music show' },
                { word: 'FESTIVAL', hint: 'Celebration event' },
                { word: 'HOLIDAY', hint: 'Special day' },
                { word: 'BIRTHDAY', hint: 'Birth anniversary' },
                { word: 'WEDDING', hint: 'Marriage ceremony' },
                { word: 'FUNERAL', hint: 'Death ceremony' },
                { word: 'CEREMONY', hint: 'Formal event' },
                { word: 'RITUAL', hint: 'Traditional practice' },
                { word: 'CUSTOM', hint: 'Traditional way' },
                { word: 'HABIT', hint: 'Regular practice' },
                { word: 'ROUTINE', hint: 'Daily pattern' },
                { word: 'SCHEDULE', hint: 'Time plan' },
                { word: 'CALENDAR', hint: 'Date organizer' },
                { word: 'APPOINTMENT', hint: 'Scheduled meeting' },
                { word: 'MEETING', hint: 'Group gathering' },
                { word: 'CONFERENCE', hint: 'Professional gathering' },
                { word: 'SEMINAR', hint: 'Educational meeting' },
                { word: 'WORKSHOP', hint: 'Practical class' },
                { word: 'LECTURE', hint: 'Educational talk' },
                { word: 'SPEECH', hint: 'Public talk' },
                { word: 'DEBATE', hint: 'Argument discussion' },
                { word: 'DISCUSSION', hint: 'Group talk' },
                { word: 'CONVERSATION', hint: 'Two-way talk' },
                { word: 'DIALOGUE', hint: 'Character talk' },
                { word: 'MONOLOGUE', hint: 'Solo speech' },
                { word: 'SILENCE', hint: 'No sound' },
                { word: 'WHISTLE', hint: 'High sound' },
                { word: 'THUNDER', hint: 'Storm sound' },
                { word: 'LIGHTNING', hint: 'Sky flash' },
                { word: 'RAINBOW', hint: 'Color arc' },
                { word: 'SUNRISE', hint: 'Dawn event' },
                { word: 'SUNSET', hint: 'Dusk event' },
                { word: 'TWILIGHT', hint: 'Dim light' },
                { word: 'MIDNIGHT', hint: '12 AM' },
                { word: 'MORNING', hint: 'Early day' },
                { word: 'EVENING', hint: 'Late day' },
                { word: 'AFTERNOON', hint: 'After noon' },
                { word: 'WEEKEND', hint: 'Saturday Sunday' },
                { word: 'WEEKDAY', hint: 'Monday to Friday' },
                { word: 'VACATION', hint: 'Holiday time' },
                { word: 'JOURNEY', hint: 'Travel trip' },
                { word: 'TRAVEL', hint: 'Go places' },
                { word: 'TOURISM', hint: 'Travel industry' },
                { word: 'TOURIST', hint: 'Traveler' },
                { word: 'VISITOR', hint: 'Guest person' },
                { word: 'STRANGER', hint: 'Unknown person' },
                { word: 'NEIGHBOR', hint: 'Next-door person' },
                { word: 'CITIZEN', hint: 'Country member' },
                { word: 'RESIDENT', hint: 'Local dweller' },
                { word: 'IMMIGRANT', hint: 'New arrival' },
                { word: 'REFUGEE', hint: 'Asylum seeker' },
                { word: 'SOLDIER', hint: 'Military person' },
                { word: 'OFFICER', hint: 'Authority figure' },
                { word: 'CAPTAIN', hint: 'Leader rank' },
                { word: 'GENERAL', hint: 'Top rank' },
                { word: 'ADMIRAL', hint: 'Navy leader' },
                { word: 'SERGEANT', hint: 'Military rank' },
                { word: 'PRIVATE', hint: 'Lowest rank' },
                { word: 'VETERAN', hint: 'Former soldier' },
                { word: 'WARRIOR', hint: 'Fighter' },
                { word: 'CHAMPION', hint: 'Winner' },
                { word: 'VICTORY', hint: 'Win result' },
                { word: 'DEFEAT', hint: 'Loss result' },
                { word: 'BATTLE', hint: 'Fight event' },
                { word: 'COMBAT', hint: 'Fighting' },
                { word: 'CONFLICT', hint: 'Disagreement' },
                { word: 'STRUGGLE', hint: 'Hard effort' },
                { word: 'EFFORT', hint: 'Try hard' },
                { word: 'ATTEMPT', hint: 'Try action' },
                { word: 'SUCCESS', hint: 'Good result' },
                { word: 'FAILURE', hint: 'Bad result' },
                { word: 'MISTAKE', hint: 'Error made' },
                { word: 'ACCIDENT', hint: 'Unplanned event' },
                { word: 'INCIDENT', hint: 'Notable event' },
                { word: 'DISASTER', hint: 'Catastrophe' },
                { word: 'CRISIS', hint: 'Emergency' },
                { word: 'DANGER', hint: 'Risk threat' },
                { word: 'SAFETY', hint: 'No danger' },
                { word: 'SECURITY', hint: 'Protection' },
                { word: 'PROTECT', hint: 'Keep safe' },
                { word: 'DEFEND', hint: 'Guard against' },
                { word: 'ATTACK', hint: 'Assault action' },
                { word: 'ESCAPE', hint: 'Get away' },
                { word: 'RESCUE', hint: 'Save someone' },
                { word: 'SURVIVE', hint: 'Stay alive' },
                { word: 'RECOVER', hint: 'Get better' },
                { word: 'HEALING', hint: 'Getting well' },
                { word: 'MEDICINE', hint: 'Healing drug' },
                { word: 'DISEASE', hint: 'Illness' },
                { word: 'ILLNESS', hint: 'Sickness' },
                { word: 'SYMPTOM', hint: 'Disease sign' },
                { word: 'TREATMENT', hint: 'Medical care' },
                { word: 'THERAPY', hint: 'Healing treatment' },
                { word: 'SURGERY', hint: 'Medical operation' },
                { word: 'HOSPITAL', hint: 'Medical building' },
                { word: 'CLINIC', hint: 'Small hospital' },
                { word: 'DOCTOR', hint: 'Medical professional' },
                { word: 'PATIENT', hint: 'Sick person' },
                { word: 'HEALTHY', hint: 'In good health' },
                { word: 'FITNESS', hint: 'Physical health' },
                { word: 'EXERCISE', hint: 'Physical activity' },
                { word: 'WORKOUT', hint: 'Exercise session' },
                { word: 'TRAINING', hint: 'Skill practice' },
                { word: 'PRACTICE', hint: 'Repeated action' },
                { word: 'PERFECT', hint: 'Without flaw' },
                { word: 'IMPROVE', hint: 'Make better' },
                { word: 'DEVELOP', hint: 'Grow progress' },
                { word: 'PROGRESS', hint: 'Move forward' },
                { word: 'ADVANCE', hint: 'Go forward' },
                { word: 'RETREAT', hint: 'Go backward' },
                { word: 'FORWARD', hint: 'Ahead direction' },
                { word: 'BACKWARD', hint: 'Behind direction' },
                { word: 'UPWARD', hint: 'Higher direction' },
                { word: 'DOWNWARD', hint: 'Lower direction' },
                { word: 'INWARD', hint: 'Inside direction' },
                { word: 'OUTWARD', hint: 'Outside direction' },
                { word: 'NORTHERN', hint: 'North direction' },
                { word: 'SOUTHERN', hint: 'South direction' },
                { word: 'EASTERN', hint: 'East direction' },
                { word: 'WESTERN', hint: 'West direction' },
                { word: 'CENTRAL', hint: 'Middle position' },
                { word: 'BORDER', hint: 'Edge boundary' },
                { word: 'BOUNDARY', hint: 'Limit line' },
                { word: 'FRONTIER', hint: 'Wild border' },
                { word: 'HORIZON', hint: 'Sky line' },
                { word: 'DISTANCE', hint: 'Space between' },
                { word: 'MEASURE', hint: 'Size amount' },
                { word: 'LENGTH', hint: 'Long measure' },
                { word: 'HEIGHT', hint: 'Tall measure' },
                { word: 'WEIGHT', hint: 'Heavy measure' },
                { word: 'VOLUME', hint: 'Space measure' },
                { word: 'DENSITY', hint: 'Thickness measure' },
                { word: 'PRESSURE', hint: 'Force measure' },
                { word: 'TEMPERATURE', hint: 'Heat measure' },
                { word: 'CLIMATE', hint: 'Weather pattern' },
                { word: 'WEATHER', hint: 'Air conditions' },
                { word: 'FORECAST', hint: 'Weather prediction' },
                { word: 'HURRICANE', hint: 'Big storm' },
                { word: 'TORNADO', hint: 'Spinning storm' },
                { word: 'EARTHQUAKE', hint: 'Ground shake' },
                { word: 'VOLCANO', hint: 'Lava mountain' },
                { word: 'TSUNAMI', hint: 'Giant wave' },
                { word: 'AVALANCHE', hint: 'Snow slide' },
                { word: 'BLIZZARD', hint: 'Snow storm' },
                { word: 'DROUGHT', hint: 'No rain' },
                { word: 'FLOODING', hint: 'Too much water' },
                { word: 'EROSION', hint: 'Wearing away' },
                { word: 'POLLUTION', hint: 'Environment damage' },
                { word: 'RECYCLE', hint: 'Reuse materials' },
                { word: 'CONSERVE', hint: 'Save resources' },
                { word: 'PRESERVE', hint: 'Keep safe' },
                { word: 'RESTORE', hint: 'Bring back' },
                { word: 'REPLACE', hint: 'Put new' },
                { word: 'SUBSTITUTE', hint: 'Use instead' },
                { word: 'EXCHANGE', hint: 'Trade swap' },
                { word: 'TRANSFER', hint: 'Move across' },
                { word: 'TRANSPORT', hint: 'Carry goods' },
                { word: 'DELIVER', hint: 'Bring to' },
                { word: 'RECEIVE', hint: 'Get from' },
                { word: 'ACCEPT', hint: 'Take willingly' },
                { word: 'REJECT', hint: 'Turn down' },
                { word: 'REFUSE', hint: 'Say no' },
                { word: 'DECLINE', hint: 'Polite no' },
                { word: 'APPROVE', hint: 'Say yes' },
                { word: 'PERMIT', hint: 'Allow action' },
                { word: 'FORBID', hint: 'Not allow' },
                { word: 'PREVENT', hint: 'Stop happening' },
                { word: 'CONTROL', hint: 'Have power' },
                { word: 'MANAGE', hint: 'Handle affairs' },
                { word: 'ORGANIZE', hint: 'Put in order' },
                { word: 'ARRANGE', hint: 'Set up' },
                { word: 'PREPARE', hint: 'Get ready' },
                { word: 'PROCESS', hint: 'Handle steps' },
                { word: 'PRODUCE', hint: 'Make output' },
                { word: 'MANUFACTURE', hint: 'Make goods' },
                { word: 'INDUSTRY', hint: 'Business sector' },
                { word: 'FACTORY', hint: 'Making place' },
                { word: 'MACHINE', hint: 'Mechanical device' },
                { word: 'EQUIPMENT', hint: 'Tools gear' },
                { word: 'INSTRUMENT', hint: 'Precise tool' },
                { word: 'DEVICE', hint: 'Gadget tool' },
                { word: 'GADGET', hint: 'Small device' },
                { word: 'APPLIANCE', hint: 'Home device' },
                { word: 'FURNITURE', hint: 'Home items' },
                { word: 'CABINET', hint: 'Storage furniture' },
                { word: 'COUNTER', hint: 'Flat surface' },
                { word: 'SURFACE', hint: 'Top layer' },
                { word: 'TEXTURE', hint: 'Surface feel' },
                { word: 'PATTERN', hint: 'Repeated design' },
                { word: 'DESIGN', hint: 'Plan layout' },
                { word: 'FASHION', hint: 'Style trend' },
                { word: 'STYLE', hint: 'Way of doing' },
                { word: 'ELEGANT', hint: 'Gracefully refined' },
                { word: 'LUXURY', hint: 'Expensive comfort' },
                { word: 'COMFORT', hint: 'Physical ease' },
                { word: 'PLEASURE', hint: 'Happy feeling' },
                { word: 'DELIGHT', hint: 'Great pleasure' },
                { word: 'ENJOY', hint: 'Take pleasure' },
                { word: 'SATISFY', hint: 'Meet needs' },
                { word: 'CONTENT', hint: 'Satisfied state' },
                { word: 'GRATEFUL', hint: 'Thankful feeling' },
                { word: 'THANKFUL', hint: 'Appreciative' },
                { word: 'APPRECIATE', hint: 'Value highly' },
                { word: 'RESPECT', hint: 'Honor regard' },
                { word: 'ADMIRE', hint: 'Look up to' },
                { word: 'INSPIRE', hint: 'Motivate action' },
                { word: 'MOTIVATE', hint: 'Give reason' },
                { word: 'ENCOURAGE', hint: 'Give support' },
                { word: 'SUPPORT', hint: 'Hold up' },
                { word: 'ASSIST', hint: 'Help out' },
                { word: 'COOPERATE', hint: 'Work together' },
                { word: 'COLLABORATE', hint: 'Team work' },
                { word: 'PARTNER', hint: 'Work companion' },
                { word: 'COMPANION', hint: 'Fellow traveler' },
                { word: 'COLLEAGUE', hint: 'Work associate' },
                { word: 'ASSOCIATE', hint: 'Connected person' }
            ],
            expert: [
                // 9-10 letter words (200+ words)
                { word: 'ELOQUENT', hint: 'Well-spoken' },
                { word: 'TREASURE', hint: 'Hidden wealth' },
                { word: 'SYMPHONY', hint: 'Orchestra music' },
                { word: 'ABSOLUTE', hint: 'Complete and total' },
                { word: 'MAGNETIC', hint: 'Attracts metal' },
                { word: 'BUTTERFLY', hint: 'Winged insect' },
                { word: 'CHOCOLATE', hint: 'Sweet treat' },
                { word: 'ADVENTURE', hint: 'Exciting journey' },
                { word: 'BEAUTIFUL', hint: 'Very attractive' },
                { word: 'DANGEROUS', hint: 'Full of risk' },
                { word: 'EDUCATION', hint: 'Learning process' },
                { word: 'FURNITURE', hint: 'Home items' },
                { word: 'GUARANTEE', hint: 'Promise assurance' },
                { word: 'HAPPINESS', hint: 'Joy state' },
                { word: 'IMPORTANT', hint: 'Significant matter' },
                { word: 'KNOWLEDGE', hint: 'Information known' },
                { word: 'LANDSCAPE', hint: 'Scenic view' },
                { word: 'MECHANISM', hint: 'Working parts' },
                { word: 'NECESSARY', hint: 'Required needed' },
                { word: 'OPERATION', hint: 'Working process' },
                { word: 'PARAGRAPH', hint: 'Text section' },
                { word: 'QUESTIONS', hint: 'Inquiries asked' },
                { word: 'RECOGNIZE', hint: 'Identify known' },
                { word: 'SITUATION', hint: 'Current state' },
                { word: 'TELEPHONE', hint: 'Calling device' },
                { word: 'UMBRELLA', hint: 'Rain protection' },
                { word: 'VEGETABLE', hint: 'Edible plant' },
                { word: 'WONDERFUL', hint: 'Amazing great' },
                { word: 'YESTERDAY', hint: 'Day before' },
                { word: 'ZEPPELIN', hint: 'Airship type' },
                { word: 'ARCHITECT', hint: 'Building designer' },
                { word: 'BIOGRAPHY', hint: 'Life story' },
                { word: 'CALCULATE', hint: 'Math compute' },
                { word: 'DEMOCRACY', hint: 'People rule' },
                { word: 'ELABORATE', hint: 'Detailed complex' },
                { word: 'FREQUENCY', hint: 'How often' },
                { word: 'GEOGRAPHY', hint: 'Earth study' },
                { word: 'HIBERNATE', hint: 'Winter sleep' },
                { word: 'IGNORANCE', hint: 'Lack knowledge' },
                { word: 'JEALOUSY', hint: 'Envious feeling' },
                { word: 'KILOMETER', hint: 'Distance measure' },
                { word: 'LIGHTNING', hint: 'Sky flash' },
                { word: 'MASCULINE', hint: 'Male quality' },
                { word: 'NIGHTMARE', hint: 'Bad dream' },
                { word: 'ORCHESTRA', hint: 'Music group' },
                { word: 'PRESIDENT', hint: 'Leader title' },
                { word: 'QUOTATION', hint: 'Repeated words' },
                { word: 'RECTANGLE', hint: 'Four-sided shape' },
                { word: 'SANCTUARY', hint: 'Safe place' },
                { word: 'TECHNICAL', hint: 'Specialized skill' },
                { word: 'UNIVERSAL', hint: 'Everywhere applicable' },
                { word: 'VOLUNTEER', hint: 'Unpaid helper' },
                { word: 'WAREHOUSE', hint: 'Storage building' },
                { word: 'XYLOPHONE', hint: 'Musical instrument' },
                { word: 'YOUNGSTER', hint: 'Young person' },
                { word: 'ZOOLOGIST', hint: 'Animal scientist' },
                { word: 'ABUNDANCE', hint: 'Plenty amount' },
                { word: 'BRILLIANT', hint: 'Very bright' },
                { word: 'COMMUNITY', hint: 'Local group' },
                { word: 'DIFFERENT', hint: 'Not same' },
                { word: 'ELIMINATE', hint: 'Remove completely' },
                { word: 'FANTASTIC', hint: 'Amazingly good' },
                { word: 'GENERATOR', hint: 'Power maker' },
                { word: 'HURRICANE', hint: 'Big storm' },
                { word: 'INFLUENCE', hint: 'Affect change' },
                { word: 'JOURNALIST', hint: 'News writer' },
                { word: 'KANGAROO', hint: 'Jumping marsupial' },
                { word: 'LEGENDARY', hint: 'Famous mythical' },
                { word: 'MOUNTAIN', hint: 'High peak' },
                { word: 'NUTRITION', hint: 'Food value' },
                { word: 'ORGANIZED', hint: 'Well arranged' },
                { word: 'POTENTIAL', hint: 'Possible ability' },
                { word: 'QUALIFIED', hint: 'Having skills' },
                { word: 'RADIATION', hint: 'Energy emission' },
                { word: 'SCULPTURE', hint: 'Art form' },
                { word: 'TRADITION', hint: 'Passed custom' },
                { word: 'UNDERLINE', hint: 'Draw below' },
                { word: 'VALUABLE', hint: 'Worth much' },
                { word: 'WHOLESALE', hint: 'Bulk sale' },
                { word: 'XENOPHOBIA', hint: 'Fear of strangers' },
                { word: 'YESTERDAY', hint: 'Previous day' },
                { word: 'ZEALOUSLY', hint: 'With passion' },
                { word: 'ALGORITHM', hint: 'Problem-solving steps' },
                { word: 'BENCHMARK', hint: 'Standard measure' },
                { word: 'CELEBRATE', hint: 'Mark occasion' },
                { word: 'DIMENSION', hint: 'Measurement aspect' },
                { word: 'EVOLUTION', hint: 'Gradual development' },
                { word: 'FORMULATE', hint: 'Create plan' },
                { word: 'GRATITUDE', hint: 'Thankful feeling' },
                { word: 'HARMONIZE', hint: 'Make compatible' },
                { word: 'IMMEDIATE', hint: 'Right now' },
                { word: 'JEOPARDIZE', hint: 'Put at risk' },
                { word: 'KINESTHETIC', hint: 'Movement sense' },
                { word: 'LABYRINTH', hint: 'Complex maze' },
                { word: 'MAGNITUDE', hint: 'Great size' },
                { word: 'NEGOTIATE', hint: 'Discuss terms' },
                { word: 'OBJECTIVE', hint: 'Goal target' },
                { word: 'PERSEVERE', hint: 'Keep trying' },
                { word: 'QUADRUPLE', hint: 'Times four' },
                { word: 'RECOMMEND', hint: 'Suggest strongly' },
                { word: 'STRATEGIC', hint: 'Planning related' },
                { word: 'TRANSFORM', hint: 'Change completely' },
                { word: 'UNDERTAKE', hint: 'Begin task' },
                { word: 'VISUALIZE', hint: 'Picture mentally' },
                { word: 'WATERFALL', hint: 'Falling water' },
                { word: 'XENOPHILE', hint: 'Foreign lover' },
                { word: 'YOUTHFUL', hint: 'Young-like' },
                { word: 'ZEALOTRY', hint: 'Extreme devotion' },
                { word: 'APOLOGIZE', hint: 'Say sorry' },
                { word: 'BROADCAST', hint: 'Send widely' },
                { word: 'CONFUSION', hint: 'Mixed up state' },
                { word: 'DEVASTATE', hint: 'Destroy completely' },
                { word: 'ENCOMPASS', hint: 'Include all' },
                { word: 'FABRICATE', hint: 'Make up' },
                { word: 'GALVANIZE', hint: 'Shock into action' },
                { word: 'HYPNOTIZE', hint: 'Put in trance' },
                { word: 'IMPROVISE', hint: 'Make up quickly' },
                { word: 'JUXTAPOSE', hint: 'Place side by side' },
                { word: 'KALEIDOSCOPE', hint: 'Color pattern viewer' },
                { word: 'LEGITIMATE', hint: 'Lawfully valid' },
                { word: 'MEMORIZE', hint: 'Learn by heart' },
                { word: 'NORMALIZE', hint: 'Make standard' },
                { word: 'ORIGINATE', hint: 'Start from' },
                { word: 'PUBLICIZE', hint: 'Make known' },
                { word: 'QUARANTINE', hint: 'Isolate for health' },
                { word: 'REINFORCE', hint: 'Make stronger' },
                { word: 'SUBSIDIZE', hint: 'Support financially' },
                { word: 'TANTALIZE', hint: 'Tease tempt' },
                { word: 'UNDERMINE', hint: 'Weaken gradually' },
                { word: 'VENTILATE', hint: 'Air out' },
                { word: 'WINTERIZE', hint: 'Prepare for cold' },
                { word: 'XENOPHOBIA', hint: 'Foreign fear' },
                { word: 'YESTERDAY', hint: 'Day before' },
                { word: 'ZIGZAGGED', hint: 'Moved in angles' },
                { word: 'ACCOMPLISH', hint: 'Complete successfully' },
                { word: 'BASKETBALL', hint: 'Court sport' },
                { word: 'CAPITALIZE', hint: 'Make uppercase' },
                { word: 'DELIBERATE', hint: 'On purpose' },
                { word: 'EXAGGERATE', hint: 'Overstate' },
                { word: 'FACILITATE', hint: 'Make easier' },
                { word: 'GENERALIZE', hint: 'Make broad' },
                { word: 'HOSPITALIZE', hint: 'Put in hospital' },
                { word: 'ILLUSTRATE', hint: 'Show by example' },
                { word: 'JOURNALISM', hint: 'News profession' },
                { word: 'KNOWLEDGEABLE', hint: 'Well-informed' },
                { word: 'LIBERALIZE', hint: 'Make freer' },
                { word: 'MONOPOLIZE', hint: 'Control entirely' },
                { word: 'NEUTRALIZE', hint: 'Make ineffective' },
                { word: 'OBLITERATE', hint: 'Destroy utterly' },
                { word: 'PERPETUATE', hint: 'Make continue' },
                { word: 'QUARRELSOME', hint: 'Argumentative' },
                { word: 'RATIONALIZE', hint: 'Justify logically' },
                { word: 'SPECIALIZE', hint: 'Focus on area' },
                { word: 'TRAUMATIZE', hint: 'Cause distress' },
                { word: 'UNDERSTAND', hint: 'Comprehend fully' },
                { word: 'VOCALIZE', hint: 'Express verbally' },
                { word: 'WEAPONIZE', hint: 'Make into weapon' },
                { word: 'XENOLITHIC', hint: 'Foreign rock' },
                { word: 'YEARNING', hint: 'Deep desire' },
                { word: 'ZESTFULLY', hint: 'With enthusiasm' },
                { word: 'ACCELERATE', hint: 'Speed up' },
                { word: 'BACKGROUND', hint: 'Behind area' },
                { word: 'CAMOUFLAGE', hint: 'Hide blend' },
                { word: 'DECORATIVE', hint: 'For beauty' },
                { word: 'ELEMENTARY', hint: 'Basic simple' },
                { word: 'FELLOWSHIP', hint: 'Companionship' },
                { word: 'GENERATION', hint: 'Age group' },
                { word: 'HELICOPTER', hint: 'Flying machine' },
                { word: 'IMPOSSIBLE', hint: 'Cannot be' },
                { word: 'JAVASCRIPT', hint: 'Programming language' },
                { word: 'KIDNAPPING', hint: 'Person taking' },
                { word: 'LABORATORY', hint: 'Science room' },
                { word: 'METABOLISM', hint: 'Body process' },
                { word: 'NAVIGATION', hint: 'Finding way' },
                { word: 'OCCUPATION', hint: 'Job profession' },
                { word: 'PERCEPTION', hint: 'How see things' },
                { word: 'QUARANTINE', hint: 'Isolation period' },
                { word: 'REVOLUTION', hint: 'Big change' },
                { word: 'STRAWBERRY', hint: 'Red fruit' },
                { word: 'TECHNOLOGY', hint: 'Applied science' },
                { word: 'UNDERSTAND', hint: 'Know meaning' },
                { word: 'VOCABULARY', hint: 'Word knowledge' },
                { word: 'WATERMELON', hint: 'Large fruit' },
                { word: 'XENOPHOBIC', hint: 'Foreign-fearing' },
                { word: 'YELLOWFISH', hint: 'Fish type' },
                { word: 'ZOOLOGICAL', hint: 'Animal-related' }
            ]
        };
        
        // Load dictionary from shared source
        async function loadDictionary() {
            try {
                console.log('Loading dictionary for Anagram Rush...');
                const response = await fetch('https://webtoys.ai/public/toybox-dictionary');
                const html = await response.text();
                
                // Extract dictionary from the HTML (handle HTML-encoded quotes)
                const match = html.match(/window\.WEBTOYS_DICTIONARY = (\[.*?\]);/s);
                const matchByLength = html.match(/window\.WEBTOYS_DICTIONARY_BY_LENGTH = ({.*?});/s);
                
                if (match && matchByLength) {
                    // Decode HTML entities
                    const jsonStr = match[1].replace(/&quot;/g, '"');
                    const jsonStrByLength = matchByLength[1].replace(/&quot;/g, '"');
                    
                    fullDictionary = JSON.parse(jsonStr);
                    wordsByLength = JSON.parse(jsonStrByLength);
                    dictionaryLoaded = true;
                    console.log(`Loaded ${fullDictionary.length} words from shared dictionary`);
                    updateStatus(`Dictionary loaded: ${fullDictionary.length.toLocaleString()} words available!`);
                    return true;
                }
            } catch (error) {
                console.error('Failed to load dictionary:', error);
            }
            
            // Fallback if loading fails
            console.log('Using fallback word lists');
            dictionaryLoaded = false;
            updateStatus('Using basic word list');
            return false;
        }
        
        // Generate a hint for a word (always shows a letter position)
        function generateHint(word) {
            const len = word.length;
            
            // Always provide a letter position hint
            const positions = ['First', 'Second', 'Third', 'Fourth', 'Fifth', 'Sixth', 'Seventh', 'Eighth', 'Ninth', 'Tenth'];
            
            // Pick a random position within the word length
            const randomIndex = Math.floor(Math.random() * Math.min(len, positions.length));
            const positionName = positions[randomIndex] || `Position ${randomIndex + 1}`;
            const letter = word[randomIndex];
            
            return `${positionName} letter: ${letter}`;
        }
        
        // Get word lists based on difficulty
        function getWordList(difficulty) {
            if (!dictionaryLoaded) {
                return fallbackWordLists[difficulty] || fallbackWordLists.easy;
            }
            
            // Use dictionary words based on length for difficulty
            let words = [];
            switch(difficulty) {
                case 'easy':
                    // 3 letter words only
                    words = [...(wordsByLength[3] || [])];
                    break;
                case 'medium':
                    // 5-6 letter words
                    words = [...(wordsByLength[5] || []), ...(wordsByLength[6] || [])];
                    break;
                case 'hard':
                    // 7-8 letter words
                    words = [...(wordsByLength[7] || []), ...(wordsByLength[8] || [])];
                    break;
                case 'expert':
                    // 9+ letter words
                    words = [...(wordsByLength[9] || []), ...(wordsByLength[10] || [])];
                    break;
            }
            
            // Filter to common words (those without special characters)
            words = words.filter(w => /^[a-z]+$/.test(w));
            
            // Shuffle array for variety
            for (let i = words.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [words[i], words[j]] = [words[j], words[i]];
            }
            
            // Convert to game format with generated hints - take up to 500 words per difficulty
            return words.slice(0, 500).map(word => ({
                word: word.toUpperCase(),
                hint: generateHint(word.toUpperCase())
            }));
        }
        
        // Word lists will be populated after dictionary loads
        let wordLists = fallbackWordLists;

        // Game state
        let gameState = {
            isPlaying: false,
            score: 0,
            wordsComplete: 0,
            currentLevel: 1,
            currentWord: null,
            currentScrambled: '',
            streak: 0,
            hintsUsed: 0,
            startTime: null,
            timeRemaining: 120, // 2 minutes in seconds
            timerInterval: null,
            usedWords: new Set() // Track used words to prevent repeats
        };

        // Auth state
        let currentUser = null;

        // Update status message
        function updateStatus(text) {
            console.log('Status:', text);
            // You can add a status element to the UI if desired
        }

        // Initialize auth
        function initAuth() {
            // Load from localStorage first
            const savedUser = localStorage.getItem('toybox_user');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    if (currentUser && currentUser.handle) {
                        currentUser.handle = currentUser.handle.toUpperCase();
                        if (!currentUser.participantId && currentUser.handle && currentUser.pin) {
                            currentUser.participantId = `${currentUser.handle.toUpperCase()}_${currentUser.pin}`;
                        }
                        updateAuthStatus();
                    }
                } catch (e) {
                    console.error('Error loading saved user:', e);
                }
            }

            // Listen for auth messages
            window.addEventListener('message', (e) => {
                if (e.data.type === 'TOYBOX_AUTH' && e.data.user) {
                    currentUser = e.data.user;
                    if (currentUser.handle) {
                        currentUser.handle = currentUser.handle.toUpperCase();
                    }
                    if (!currentUser.participantId && currentUser.handle && currentUser.pin) {
                        currentUser.participantId = `${currentUser.handle.toUpperCase()}_${currentUser.pin}`;
                    }
                    localStorage.setItem('toybox_user', JSON.stringify(currentUser));
                    updateAuthStatus();
                }
            });

            // Request auth from parent
            if (window.parent !== window) {
                window.parent.postMessage({ type: 'GET_AUTH' }, '*');
            }
        }

        function updateAuthStatus() {
            // Auth display removed for mobile optimization
        }

        // Scramble a word
        function scrambleWord(word) {
            const letters = word.split('');
            for (let i = letters.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [letters[i], letters[j]] = [letters[j], letters[i]];
            }
            // Make sure it's actually scrambled
            const scrambled = letters.join('');
            if (scrambled === word && word.length > 2) {
                return scrambleWord(word);
            }
            return scrambled;
        }

        // Get word for current level
        function getWordForLevel() {
            let difficulty;
            if (gameState.currentLevel <= 3) difficulty = 'easy';
            else if (gameState.currentLevel <= 6) difficulty = 'medium';
            else if (gameState.currentLevel <= 9) difficulty = 'hard';
            else difficulty = 'expert';

            // Always use our curated fallback words for better gameplay
            // Dictionary words include too many obscure entries like ORT, ILK, etc.
            const words = fallbackWordLists[difficulty];
            
            // Find a word that hasn't been used yet
            let availableWords = words.filter(w => !gameState.usedWords.has(w.word));
            
            // If we've used all words in this difficulty, reset the used words for this difficulty
            if (availableWords.length === 0) {
                console.log(`Resetting used words for ${difficulty} difficulty`);
                // Clear only words from this difficulty level
                const difficultyWords = new Set(words.map(w => w.word));
                gameState.usedWords = new Set([...gameState.usedWords].filter(w => !difficultyWords.has(w)));
                availableWords = words;
            }
            
            // Select a random word from available words
            const selectedWord = availableWords[Math.floor(Math.random() * availableWords.length)];
            
            // Add to used words
            gameState.usedWords.add(selectedWord.word);
            
            return selectedWord;
        }

        // Update level display
        function updateLevelDisplay() {
            const levelIndicator = document.getElementById('levelIndicator');
            let difficulty;
            if (gameState.currentLevel <= 3) difficulty = 'Easy (3 letters)';
            else if (gameState.currentLevel <= 6) difficulty = 'Medium (5 letters)';
            else if (gameState.currentLevel <= 9) difficulty = 'Hard (6 letters)';
            else difficulty = 'Expert (7-8 letters)';
            
            levelIndicator.textContent = `Level ${gameState.currentLevel} - ${difficulty}`;
        }

        // Start new game
        function startGame() {
            gameState = {
                isPlaying: true,
                score: 0,
                wordsComplete: 0,
                currentLevel: 1,
                currentWord: null,
                currentScrambled: '',
                streak: 0,
                hintsUsed: 0,
                startTime: Date.now(),
                timeRemaining: 120, // Reset to 2 minutes
                timerInterval: null,
                usedWords: new Set() // Reset used words for new game
            };

            // Update UI
            document.getElementById('score').textContent = '0';
            document.getElementById('wordsComplete').textContent = '0';
            document.getElementById('timeElapsed').textContent = '2:00';
            // Reset timer color
            document.getElementById('timeElapsed').style.color = '';
            document.getElementById('timeElapsed').style.fontWeight = '';
            document.getElementById('wordInput').disabled = false;
            document.getElementById('wordInput').value = '';
            document.getElementById('hintBtn').disabled = false;
            document.getElementById('skipBtn').disabled = false;
            document.getElementById('startBtn').textContent = 'RESTART';
            document.getElementById('message').innerHTML = '';
            document.getElementById('hint').textContent = '';
            
            // Start timer
            gameState.timerInterval = setInterval(updateTimer, 1000);
            
            // Load first word
            nextWord();
        }

        // Update timer
        function updateTimer() {
            gameState.timeRemaining--;
            
            if (gameState.timeRemaining <= 0) {
                // Time's up! End the game
                endGame();
                return;
            }
            
            const minutes = Math.floor(gameState.timeRemaining / 60);
            const seconds = gameState.timeRemaining % 60;
            document.getElementById('timeElapsed').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Add warning color when time is running out
            if (gameState.timeRemaining <= 10) {
                document.getElementById('timeElapsed').style.color = '#ff0000';
                document.getElementById('timeElapsed').style.fontWeight = 'bold';
            } else if (gameState.timeRemaining <= 30) {
                document.getElementById('timeElapsed').style.color = '#ff6600';
            }
        }

        // Load next word
        function nextWord() {
            gameState.currentWord = getWordForLevel();
            gameState.currentScrambled = scrambleWord(gameState.currentWord.word);
            
            document.getElementById('scrambledLetters').textContent = gameState.currentScrambled;
            document.getElementById('hint').textContent = '';
            document.getElementById('wordInput').value = '';
            document.getElementById('wordInput').focus();
            
            updateLevelDisplay();
        }

        // Check answer
        function checkAnswer() {
            const input = document.getElementById('wordInput');
            const answer = input.value.trim().toUpperCase();
            
            if (answer === gameState.currentWord.word) {
                // Correct!
                gameState.wordsComplete++;
                gameState.streak++;
                
                // Calculate score (more points for speed and no hints)
                let points = gameState.currentWord.word.length * 100;
                // Speed bonus for answering quickly (more time remaining = more bonus)
                if (gameState.timeRemaining > 90) {
                    points += 50; // Speed bonus for first 30 seconds
                }
                if (!document.getElementById('hint').textContent) {
                    points += 100; // No hint bonus
                }
                
                gameState.score += points;
                
                // Update UI
                document.getElementById('score').textContent = gameState.score;
                document.getElementById('wordsComplete').textContent = gameState.wordsComplete;
                
                // Show streak
                if (gameState.streak >= 3) {
                    const streakIndicator = document.getElementById('streakIndicator');
                    streakIndicator.textContent = `üî• Streak: ${gameState.streak}`;
                    streakIndicator.classList.add('active');
                }
                
                // Visual feedback
                input.classList.add('correct');
                setTimeout(() => input.classList.remove('correct'), 500);
                
                showMessage(`Correct! +${points} points!`, 'success');
                
                // Level up every 3 words
                if (gameState.wordsComplete % 3 === 0) {
                    gameState.currentLevel++;
                    showMessage(`Level ${gameState.currentLevel} unlocked!`, 'success');
                }
                
                // Next word
                setTimeout(nextWord, 1000);
            }
        }

        // Show hint
        function showHint() {
            if (gameState.score >= 50) {
                gameState.score -= 50;
                document.getElementById('score').textContent = gameState.score;
                document.getElementById('hint').textContent = `Hint: ${gameState.currentWord.hint}`;
                gameState.hintsUsed++;
            } else {
                showMessage('Not enough points for a hint!', 'error');
            }
        }

        // Skip word
        function skipWord() {
            gameState.streak = 0;
            document.getElementById('streakIndicator').classList.remove('active');
            showMessage('Word skipped! Streak lost.', 'error');
            nextWord();
        }

        // End game
        function endGame() {
            gameState.isPlaying = false;
            clearInterval(gameState.timerInterval);
            
            document.getElementById('wordInput').disabled = true;
            document.getElementById('hintBtn').disabled = true;
            document.getElementById('skipBtn').disabled = true;
            document.getElementById('startBtn').textContent = 'START GAME';
            document.getElementById('scrambledLetters').textContent = 'TIME\'S UP!';
            
            // Reset timer color
            document.getElementById('timeElapsed').style.color = '';
            document.getElementById('timeElapsed').style.fontWeight = '';
            
            showMessage(`Game Over! Final Score: ${gameState.score} | Words Completed: ${gameState.wordsComplete} | Level Reached: ${gameState.currentLevel}`, 'success');
            
            if (gameState.score > 0) {
                saveScore();
            }
        }

        // Save score
        async function saveScore() {
            if (!currentUser || !currentUser.participantId) {
                console.log('No user logged in, score not saved');
                return;
            }

            const scoreData = {
                handle: currentUser.handle,
                score: gameState.score,
                wordsComplete: gameState.wordsComplete,
                level: gameState.currentLevel,
                time: 120 - gameState.timeRemaining, // Time used
                timestamp: new Date().toISOString()
            };

            try {
                const response = await fetch('/api/zad/save', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        app_id: 'toybox-anagram-rush',
                        participant_id: currentUser.participantId,
                        action_type: 'high_score',
                        content_data: scoreData
                    })
                });

                if (response.ok) {
                    console.log('Score saved successfully');
                    loadLeaderboard();
                }
            } catch (error) {
                console.error('Error saving score:', error);
            }
        }

        // Load leaderboard
        async function loadLeaderboard() {
            try {
                const response = await fetch('/api/zad/load?app_id=toybox-anagram-rush&action_type=high_score');
                const data = await response.json();
                
                // Process and sort scores
                const scores = data.map(entry => ({
                    handle: entry.content_data.handle || 'Anonymous',
                    score: entry.content_data.score,
                    wordsComplete: entry.content_data.wordsComplete,
                    level: entry.content_data.level
                }));

                // Get top scores per player
                const topScores = {};
                scores.forEach(score => {
                    if (!topScores[score.handle] || topScores[score.handle].score < score.score) {
                        topScores[score.handle] = score;
                    }
                });

                // Sort and get top 10
                const sortedScores = Object.values(topScores)
                    .sort((a, b) => b.score - a.score)
                    .slice(0, 10);

                displayLeaderboard(sortedScores);
            } catch (error) {
                console.error('Error loading leaderboard:', error);
                document.getElementById('leaderboardList').innerHTML = '<p style="color: #999;">Failed to load leaderboard</p>';
            }
        }

        // Display leaderboard
        function displayLeaderboard(scores) {
            const leaderboardList = document.getElementById('leaderboardList');
            
            if (scores.length === 0) {
                leaderboardList.innerHTML = '<p style="color: #999;">No scores yet. Be the first!</p>';
                return;
            }

            leaderboardList.innerHTML = scores.map((score, index) => `
                <div class="leaderboard-entry">
                    <span class="leaderboard-rank">#${index + 1}</span>
                    <span class="leaderboard-name">${score.handle}</span>
                    <span class="leaderboard-score">${score.score} pts (L${score.level})</span>
                </div>
            `).join('');
        }

        // Show message
        function showMessage(text, type) {
            const messageEl = document.getElementById('message');
            messageEl.className = `message ${type}`;
            messageEl.textContent = text;
            
            setTimeout(() => {
                messageEl.innerHTML = '';
                messageEl.className = '';
            }, 3000);
        }

        // Event listeners
        document.getElementById('startBtn').addEventListener('click', startGame);
        document.getElementById('hintBtn').addEventListener('click', showHint);
        document.getElementById('skipBtn').addEventListener('click', skipWord);
        
        document.getElementById('wordInput').addEventListener('input', (e) => {
            if (gameState.isPlaying) {
                checkAnswer();
            }
        });

        // Initialize
        initAuth();
        loadLeaderboard();
        
        // Skip dictionary loading - use our curated word lists for better gameplay
        // Dictionary has too many obscure words like ORT that make the game frustrating
        console.log('Anagram Rush ready with curated word lists');
        updateStatus('Ready to play!');
        
        // Refresh leaderboard periodically
        setInterval(loadLeaderboard, 30000);
    </script>
</body>
</html>